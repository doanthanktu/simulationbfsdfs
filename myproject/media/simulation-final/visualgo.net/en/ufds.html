<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from visualgo.net/en/ufds by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Dec 2023 15:18:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8">
<meta name="description" content="The Union-Find Disjoint Sets (UFDS) data structure is used to model a collection of disjoint sets, which is able to efficiently (i.e., in nearly constant time) determine which set an item belongs to, test if two items belong to the same set, and union two disjoint sets into one when needed. It can be used to find connected components in an undirected graph, and can hence be used as part of Kruskal&amp;#39;s algorithm for the Minimum Spanning Tree (MST) problem.">
<meta name="keywords" content="Union-Find Disjoint Sets UFDS Connected Component Kruskal Minimum Spanning Tree MST">
 
<meta name="csrf-token" content="dOvHLDgQSeBxDYich7PEZml1cYPqAYZaOAN2Xn3H">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">
<meta property="og:image" content="../img/png/ufds.png">
<title>Union-Find Disjoint Sets (UFDS) - VisuAlgo</title>
<link rel="icon" href="../img/favicon.png" type="image/x-icon">
<link rel="shortcut icon" href="../img/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/favicon.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/favicon.png">
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="../fonts/silkscreen/stylesheet.css">
<link rel="stylesheet" type="text/css" href="../css/common-1.0.2.css">
<link rel="stylesheet" href="../css/viz-1.0.4.css">
<link rel="stylesheet" href="../css/visual.css">
<link rel="stylesheet" href="../css/drawgraph-1.0.2.css">
<style>
      #e-lecture {
        top: 45px;
        right: 130px;
        width: 400px;
        display: block;
        background: none;
        /*overflow: normal;*/
        white-space: normal;
        text-align: right;
        color: black; font-weight: bold; font-size: 20px;
        z-index: 8001;
      }
      #e-lecture-timeline {
        top: 80px;
        right: 130px;
        display: flex;
        position: absolute;
        z-index: 10000;
      }
      .e-lecture-timeline-slide {
        height: 5px;
        width: 2px;
        background: black;
        float: left;
      }
      .e-lecture-timeline-checkpoint {
        height: 20px;
        width: 3px;
        margin-left: 2px;
        margin-top: -7.5px;
        background: black;
        float: left;
      }

      #e-lecture-f1map {
        top: 102.5px;
        right: 130px;
        display: flex;
        position: absolute;
        z-index: 10000;
      }

      .e-lecture-f1map-sector {
        flex-grow: 1;
        background: black;
        float: left;
        height: 5px;
        margin-right: 1px;
      }

      .e-lecture-f1map-sector:last-child {
        margin-right: 0px;
      }

      .electure-prev, .electure-next { /* force update, copied from viz.css */
        position: absolute;
        /* bottom: -12px; */
        top: -20px;
        /*bottom: '';*/
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
      }

      .electure-read-status {
        position: absolute;
        bottom: 4px;
        right: 4px;
        font-size: 14px;
        cursor: default;
        color: #00FF7F;
        display: none;
      }

      .electure-prev {
        left: -10px;
        /* right: 30px; */
      }
      .electure-next {
        right: -10px;
        color: white;
      }
      .electure-print, .electure-end {
        position: fixed;
        top: 45px;
        height: 20px;
        width: 17px;
        right: 80px;
        padding: 3px 8px;
        background: #999;
        color: white;
        cursor: pointer;
        border-radius: 2px;
        text-align: center;
      }
      .electure-end {
        right: 45px; /* beside the X */
      }

      #change-lang-popup {
        position: fixed;
        background: green;
        left: 40px;
        top: 50px;
        width: 250px;
        height: 125px;
        border: transparent;
        border-radius: 10px;
        padding: 10px 20px;
        z-index: 9000;
      }

      #change-lang-popup p {
        font-size: medium;
        color: white;
        line-height: 2;
        font-family: "PT Sans", sans-serif;
      }

      #change-lang-popup-btn {
        text-decoration: underline;
        margin-left: 50px;
      }

      #change-lang-popup-btn:hover {
        cursor: pointer;
      }

      #rotateDeviceOverlay {
        z-index: 10000;
        width: 90%;
        height: 100%;
        align-items: center;
        justify-content: center;
        background-color: white;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        display: flex;
        padding-right: 5%;
        padding-left: 5%;
        overflow: hidden;
      }

      #mobile-playback-overlay {
        z-index: 9600;
        width: 90%;
        height: 100%;
        align-items: center;
        justify-content: center;
        gap: 100px;
        background-color: black;
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        display: flex;
        padding-right: 5%;
        padding-left: 5%;
        opacity: 0.3;
        overflow: hidden;
      }
      .mobile-playback-item {
        min-width: 2.5%;
        max-width: 35px;
      }
      .mobile-playback-item img {
        width: 100%
      }
      .mobile-playback-label {
        opacity: 0;
        color: white;
        font-size: 25px;
        font-weight: bold;
        min-width: 1.5%;
        max-width: 25px;
        transition: opacity 0.25s ease-out;
        -webkit-backface-visibility: hidden;
      }
      #mobile-playback-rewind-label {
        margin-right: -70px;
      }
      #mobile-playback-forward-label {
        margin-left: -70px;
      }
      #viz-speed-value {
          font-size: 15px;
          width: 10%;
      }

      #scale {
        position: fixed;
        left: 5px;
      }
    </style>
<style>
/* copied here from common.css (perhaps need to use version numbering) until caches worldwide settles */
#reload-mobile-popup, #message-popup { /* #gdpr-popup, */
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  min-width: 320px;
  bottom: 62px;
  height: 300px;
  background-color: #0275d8;
  border-radius: 15px;
  padding: 30px 40px;
  z-index: 9500;
}
#reload-mobile-popup {
  background-color: green;
  height: 200px;
}
#message-popup {
  z-index: 9000;
  width: 40%;
  height: 130px;
  background-color: #d9534f;
}

#reload-mobile-popup p, #message-popup p { /* #gdpr-popup p, */
  font-size: large;
  color: white;
  line-height: 2;
  font-family: "PT Sans", sans-serif;
}

#reload-mobile-popup .inner-button, #message-popup .inner-button { /* #gdpr-popup .gdpr-button, */
  border: white solid 2px;
  border-radius: 4px;
  font-weight: bold;
  font-size: x-large;
  padding: 2px 8px;
  color: white;
  width: 90px;
  text-align: center;
  position: absolute;
  letter-spacing: 1px;
  text-decoration: none;
  cursor: pointer;
}

#gdpr-accept, #reload-mobile-button, #dismiss-message-btn {
  bottom: 30px;
  right: 40px;
}

#gdpr-reject, #cancel-reload-mobile-button {
  bottom: 30px;
  right: 170px;
}
    </style>
</head>
<body>
<div id="body-container" style="display: flex; flex-direction: column; min-height: 100vh;">
<style>
  #topbar {
    background-color: rgb(0,0,0);
    font-family: "PT Sans", sans-serif;
    font-size: 13px;
    height: 40px;

    padding-left: 40px;
    padding-right: 40px;

    display: flex;
    flex-wrap: wrap;
    align-items: center;
    position: relative;
    justify-content: flex-start;
  }

  #topbar a:hover {
    text-decoration: none;
  }

  #account-dropdown-btn {
    color: #198754;
    font-size: 1rem;
    padding: 0 0.5rem;
    margin-left: 0.5rem;

    border: 2px solid;
    border-radius: 0.25rem;
    height: 24px;
    line-height: 1.5;
  }

  #account-dropdown-btn:hover {
    color: #0a58ca!important;
    border-color: #198754;
    text-decoration: none;
  }

  #login-button {
    color: #198754;
    font-size: 1rem;
    padding: 0 0.5rem;
    margin-left: 0.5rem;

    border: 2px solid;
    border-radius: 0.25rem;

    height: 24px;
    line-height: 1.5;
  }

  #login-button a:hover {
    color: #0a58ca!important;
    text-decoration: none;
  }

  #account-dropdown-menu {
    display: none;
    position: absolute;
    background-color: white;
    z-index: 1000;
    min-width: 10rem;
    padding: 0.5rem 0;
    margin: 0;
    font-size: 1rem;
    color: rgb(0,0,0);
    text-align: left;
    list-style: none;
    background-clip: padding-box;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 0.25rem;
    top: 45px;
    right: 40px;
    line-height: 1.5;
  }

  .account-dropdown-item {
    display: block;
    width: auto;
    padding: 0.25rem 1rem;
    clear: both;
    font-weight: 400;
    color: rgb(0,0,0);
    text-align: inherit;
    text-decoration: none;
    white-space: nowrap;
    background-color: transparent;
    border: 0;
    height: 24px;
    font-family: SilkscreenNormal, sans-serif;
  }

  .account-dropdown-item:hover {
    background-color: #e9ecef;
    color: #0a58ca;
    text-decoration: none;
  }
</style>
<nav id="topbar">
<span style="margin-right: 0.25rem">
<a href="https://www.comp.nus.edu.sg/~stevenha" style="text-decoration: none; color: white">
<span class="colour" style="border: 1px solid; border-color: #198754!important; border-radius: .25rem!important">7</span>
</a>
<a href="https://visualgo.net/" style="font-family: SilkscreenNormal,sans-serif; font-size: 20px; margin-left: 4px;">
<span style="color: white">Visu</span><span class="colour">Algo</span><span style="font-size: 40%; color: white">.net</span>
</a>
<span style="color: white">/</span>
<select id="Language" class="select2-dropdown" onchange="changeURL()">
<option value="en" selected>en</option>
<option value="zh">zh</option>
<option value="id">id</option>
</select>
<span style="color: white; font-family: monospace">/ufds</span>
</span>
<span style="max-height: 30px">
<span id="title">
<a id="title-ufds" class="selected-viz">Union-Find Disjoint Sets (UFDS)</a>
</span>
</span>
<span style="max-height: 30px; background-color:rgb(0,0,0)!important; color: white; margin-left: auto">
<div id="mode-menu">
<div id="mode-button" style="background-color: rgb(0,0,0)!important;" title="exploration">Exploration Mode &#9663;</div>
<div id="other-modes" style="background-color: rgb(0,0,0)!important; padding-top: 11px">
<a title="e-Lecture" style="background-color: rgb(0,0,0)!important;">e-Lecture Mode</a>
</div>
</div>
</span>
<span id="login-button" style="font-family: SilkscreenNormal,sans-serif">
<a href="https://visualgo.net/login">Login</a>
</span>
</nav>
<ul id="account-dropdown-menu">
<li><a class="account-dropdown-item" href="https://visualgo.net/profile">Profile</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/training">Training</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/tests">Tests</a></li>
<li><a class="account-dropdown-item" href="https://visualgo.net/logout">Log Out</a></li>
</ul>
<script>
  function changeURL() {
    let URL = window.location.href.split('https://visualgo.net/');
    URL[3] = document.getElementById("Language").value;
    window.location.assign(URL.join('https://visualgo.net/'));
  }

  function changeDefaultLanguageAndURL() {
    let URL = window.location.href.split('https://visualgo.net/');
    let val = document.getElementById("Language").value;
    URL[3] = val;

    let data = {
      '_token': "dOvHLDgQSeBxDYich7PEZml1cYPqAYZaOAN2Xn3H",
      'lang'  : val
    }
    $.post('https://visualgo.net/changeLanguage', data, function (res, status) {
      if(res['status'] === 'success') {
        window.location.assign(URL.join('https://visualgo.net/'));
      } else if (res['status'] === 'failed') {
        alert(res['message']);
      } else {
        alert('An unknown error occurred');
      }
    })
  }
</script>
<div id="dark-overlay"></div>
<div id="main-content-container" style="flex: 1">

<div id="mobile-playback-overlay" class="playing" style="display: none;">
<span id="mobile-playback-rewind-label" class="mobile-playback-label">-7</span>
<span id="mobile-playback-rewind" class="mobile-playback-item" onclick="mobilePlaybackRewind()"><img src="../img/prevFrame.png" alt="rewind 7 frames"></span>
<span id="mobile-playback-pause" class="mobile-playback-item" onclick="mobilePlaybackPauseOrPlay()"><img src="../img/pause.png" alt="pause"></span>
<span id="mobile-playback-play" class="mobile-playback-item" style="display: none;" onclick="mobilePlaybackPauseOrPlay()"><img src="../img/play.png" alt="play"></span>
<span id="mobile-playback-forward" class="mobile-playback-item" onclick="mobilePlaybackForward()"><img src="../img/nextFrame.png" alt="forward 7 frames"></span>
<span id="mobile-playback-forward-label" class="mobile-playback-label">+7</span>
</div>
<div id="status" class="panel"><p></p></div>
<div id="status-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide status panel" /></div>
<div id="codetrace" class="panel">
<p id="code1" style="padding-top: 10px;"></p>
<p id="code2"></p>
<p id="code3"></p>
<p id="code4"></p>
<p id="code5"></p>
<p id="code6"></p>
<p id="code7" style="padding-bottom: 10px;"></p>
</div>
<div id="codetrace-hide" class="panel-hide"><img src="../img/arrow_white_right.png" alt=">" title="show/hide codetrace panel" /></div>
<div id="left-bar"></div>
<div id="right-bar"></div>
<div id="media-controls">
<div id="speed-control"><div id="speed-input"></div><div id="viz-speed-value">1x</div></div>
<span id="go-to-beginning" class="media-control-button" title="go to beginning" onclick="goToBeginning()"><img src="../img/goToBeginning.png" alt="go to beginning"></span>
<span id="previous" class="media-control-button" title="step backward" onclick="stepBackward()"><img src="../img/prevFrame.png" alt="previous frame"></span>
<span id="pause" class="media-control-button" title="pause" onclick="pause()"><img src="../img/pause.png" alt="pause"></span>
<span id="play" class="media-control-button" title="play" onclick="play()"><img src="../img/play.png" alt="play"></span>
<span id="next" class="media-control-button" title="step forward" onclick="stepForward()"><img src="../img/nextFrame.png" alt="next frame"></span>
<span id="go-to-end" class="media-control-button" title="go to end" onclick="goToEnd()"><img src="../img/goToEnd.png" alt="go to end"></span>
<div id="progress-bar" class="media-control-button"></div>
</div>
<div id="viz">
<p id="info" "></p>
</div>
<div id="current-action" class="panel"></div>
<div id="e-lecture" class="panel"></div> 
<div id="e-lecture-timeline"></div>
<div id="e-lecture-f1map">
<div class="e-lecture-f1map-sector" sectorNo="1"></div>
<div class="e-lecture-f1map-sector" sectorNo="2"></div>
<div class="e-lecture-f1map-sector" sectorNo="3"></div>
</div>
<div id="overlay" hidden onclick="end_eLecture()"> 
<div id="electure-dropdown">
<select class="lecture-dropdown" style="width:100%">
<option value="1">1. Union-Find Disjoint Sets (UFDS)</option>
<option value="2">2. Visualization </option>
<option value="2-1">&nbsp;&nbsp;&nbsp;2-1. Checkpoint 1</option>
<option value="2-2">&nbsp;&nbsp;&nbsp;2-2. Storing the Data - Part 1</option>
<option value="2-3">&nbsp;&nbsp;&nbsp;2-3. The Implications</option>
<option value="2-4">&nbsp;&nbsp;&nbsp;2-4. Checkpoint 2</option>
<option value="2-5">&nbsp;&nbsp;&nbsp;2-5. Storing the Data - Part 2</option>
<option value="2-6">&nbsp;&nbsp;&nbsp;2-6. Checkpoint 3</option>
<option value="3">3. Operations </option>
<option value="4">4. Initialize(N, M)</option>
<option value="5">5. FindSet(i)</option>
<option value="5-1">&nbsp;&nbsp;&nbsp;5-1. Hands-on Examples</option>
<option value="6">6. IsSameSet(i, j)</option>
<option value="6-1">&nbsp;&nbsp;&nbsp;6-1. Hands-on Examples</option>
<option value="7">7. UnionSet(i, j)</option>
<option value="7-1">&nbsp;&nbsp;&nbsp;7-1. Indirect Path Compression</option>
<option value="7-2">&nbsp;&nbsp;&nbsp;7-2. Hands-on Examples</option>
<option value="7-3">&nbsp;&nbsp;&nbsp;7-3. Mini Quizzes</option>
<option value="7-4">&nbsp;&nbsp;&nbsp;7-4. The Answer</option>
<option value="8">8. Actual Time Complexities</option>
<option value="9">9. Extras</option>
<option value="9-1">&nbsp;&nbsp;&nbsp;9-1. Source Code</option>
<option value="9-2">&nbsp;&nbsp;&nbsp;9-2. Online Quiz</option>
<option value="9-3">&nbsp;&nbsp;&nbsp;9-3. Online Judge Exercises</option>
<option value="9-4">&nbsp;&nbsp;&nbsp;9-4. The Hints</option>
<option value="9-5">&nbsp;&nbsp;&nbsp;9-5. Union, Find, de-Union?</option>
<option value="9-6">&nbsp;&nbsp;&nbsp;9-6. The Answer</option>
</select>
</div>
<div class="electure-print" title="Print the e-Lecture note" style="z-index=8001;">&#9997;</div>
<div class="electure-end" title="Close the e-Lecture mode" style="z-index=8001;">&#10008;</div>
</div>
<div id="dropdown-temp-holder" hidden></div>

<div id="electure-1" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>The Union-Find Disjoint Sets (UFDS) data structure is used to model a collection of disjoint sets, which is able to <i>efficiently (i.e., in nearly constant time)</i> determine which set an item belongs to, test if two items belong to the same set, and union two disjoint sets into one when needed. It can be used to find connected components in an undirected graph, and can hence be used as part of Kruskal&#39;s algorithm for the <a href="mst.html"><u>Minimum Spanning Tree (MST)</u></a> problem.</p>
<div class="electure-addition">
<hr>
<p><b>Remarks</b>: By default, we show e-Lecture Mode for first time (or non logged-in) visitor.<br>
If you are an NUS student and a repeat visitor, please <a href="https://visualgo.net/login"><u>login</u></a>.</p>
</div>
<div class="electure-next" data-nextid="2" title="Go to the next slide 2">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>View the visualization of a sample Union-Find Disjoint Sets here!</p><br><p>Each tree represents a disjoint set (thus a collection of disjoint sets form <i>a forest of trees</i>) and the root of the tree is the representative item of this disjoint set.</p><br><p>Now stop and look at the currently visualized trees. How many items (<b>N</b>) are there overall? How many disjoint sets are there? What are the members of each disjoint set? What is the representative item of each disjoint set?</p>
<div class="electure-addition">
<hr>
<p>Pro-tip 1: Since you are not <a href="https://visualgo.net/login"><u>logged-in</u></a>, you may be a first time visitor (or not an NUS student) who are not aware of the following keyboard shortcuts to navigate this e-Lecture mode: <b>[PageDown]</b>/<b>[PageUp]</b> to go to the next/previous slide, respectively, (and if the drop-down box is highlighted, you can also use <b>[&rarr; or &darr;/&larr; or &uarr;]</b> to do the same),and <b>[Esc]</b> to toggle between this e-Lecture mode and exploration mode.</p>
</div>
<div class="electure-prev" data-nextid="1" title="Go to the previous slide 1">&larr;</div>
<div class="electure-next" data-nextid="2-1" title="Go to the next slide 2-1">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-1" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>As we fixed the default example for this e-Lecture, your answers should be: <b>N=13</b> and there are 4 disjoint sets: {0,1,2,<u>3</u>,4,10}, {<u>5</u>,7,8,11}, {<u>6</u>,9}, {<u>12</u>} with the <u>underlined</u> members be the representative items (of their own disjoint set).</p>
<div class="electure-addition">
<hr>
<p>Pro-tip 2: We designed this visualization and this e-Lecture mode to look good on 1366x768 resolution <b>or larger</b> (typical modern laptop resolution in 2021). We recommend using Google Chrome to access VisuAlgo. Go to full screen mode (<b>F11</b>) to enjoy this setup. However, you can use zoom-in (<b>Ctrl +</b>) or zoom-out (<b>Ctrl -</b>) to calibrate this.</p>
</div>
<div class="electure-prev" data-nextid="2" title="Go to the previous slide 2">&larr;</div>
<div class="electure-next" data-nextid="2-2" title="Go to the next slide 2-2">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-2" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>We can simply record this <i>forest of trees</i> with an array <b>p</b> of size <b>N</b> items where <b>p[i]</b> records the parent of item <b>i</b> and if <b>p[i] = i</b>, then <b>i</b> is the root of this tree and also the representative item of the set that contains item <b>i</b>.</p><br><p>Once again, look at the visualization above and determine the values inside this array <b>p</b>.</p><br><p>Discuss: If <b>i</b> is the root of the tree that contains it, can we set <b>p[i] = -1</b> instead of <b>p[i] = i</b>? What are the implications?</p>
<div class="electure-addition">
<hr>
<p>Pro-tip 3: Other than using the typical media UI at the bottom of the page, you can also control the animation playback using keyboard shortcuts (in Exploration Mode): <b>Spacebar</b> to play/pause/replay the animation, <b>&larr;</b>/<b>&rarr;</b> to step the animation backwards/forwards, respectively, and <b>-</b>/<b>+</b> to decrease/increase the animation speed, respectively.</p>
</div>
<div class="electure-prev" data-nextid="2-1" title="Go to the previous slide 2-1">&larr;</div>
<div class="electure-next" data-nextid="2-3" title="Go to the next slide 2-3">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-3" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="2-2" title="Go to the previous slide 2-2">&larr;</div>
<div class="electure-next" data-nextid="2-4" title="Go to the next slide 2-4">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-4" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>On the same fixed example, your answers should be <b>p = [1, 3, 3, 3, 3, 5, 6, 5, 5, 6, 4, 8,12]</b> of size <b>N = 13</b> ranging from <b>p[0] to <b>p[12]</b>.</b></p><br><p>You can check that <b>p[3] = 3</b>, <b>p[5] = 5</b>, <b>p[6] = 6</b>, and <b>p[12] = 12</b>, which are consistent with the fact that {3,5,6,12} are the representative items (of their own disjoint set).</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="2-3" title="Go to the previous slide 2-3">&larr;</div>
<div class="electure-next" data-nextid="2-5" title="Go to the next slide 2-5">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-5" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>We also record one more information in array <b>rank</b> also of size <b>N</b>. The value of <b>rank[i]</b> is the <i>upperbound</i> of the height of subtree rooted at vertex <b>i</b> that will be used as <i>guiding heuristic</i> for <b>UnionSet(i, j)</b> operation. You will notice that after &#39;path-compression&#39; heuristic (to be described later) compresses some path, the rank values no longer reflect the true height of that subtree.</p><br><p>As there are many items with rank 0, we set the visualization as follows to minimize clutter: Only when the rank of a vertex <b>i</b> is greater than 0, then VisuAlgo will show the value of <b>rank[i]</b> (abbreviated as a single character <b>r</b>) as a <span style="color: red;">red text</span> below vertex <b>i</b>.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="2-4" title="Go to the previous slide 2-4">&larr;</div>
<div class="electure-next" data-nextid="2-6" title="Go to the next slide 2-6">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-2-6" class="electure-dialog" style="top:280px;left:50%;margin-left:-250px;width:500px;">
<p>On the same fixed example, verify that {1,4,6,8} have rank 1 and {3,5} have rank 2, with the rest having rank 0 (not shown).</p><br><p>At this point of time, all rank values are correct, i.e., they really describe the height of the subtree rooted at that vertex. We will soon see that they will not be always correct in the next few slides.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="2-5" title="Go to the previous slide 2-5">&larr;</div>
<div class="electure-next" data-nextid="3" title="Go to the next slide 3">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-3" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p>There are five available UFDS operations in this visualization page:<br><b>Examples</b>, <b>Initialize(N)</b>, <b>FindSet(i)</b>, <b>IsSameSet(i, j)</b>, and <b>UnionSet(i, j)</b>.</p><br><p>The first operation (<b>Examples</b>) is trivial: List of example UFDS structures with various special characteristics for your starting point. This e-Lecture mode always use the &#39;<b>Four disjoint sets</b>&#39; example as the starting point.</p><br><p>Also notice that none of the example contains a &#39;very tall&#39; tree. You will soon understand the reason after we describe the two heuristics used.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="2-6" title="Go to the previous slide 2-6">&larr;</div>
<div class="electure-next" data-nextid="4" title="Go to the next slide 4">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-4" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p><b>Initialize(N, M)</b>: Create <b>N</b> items and form <b>M</b> disjoint sets with these <b>N</b> items. We randomly pick two disjoint sets and merge them until we have <b>M</b> random disjoint sets. Due to the union-by-rank heuristics used and the randomness, it is very unlikely that this initialization process creates a tall tree.</p><br><p>The default form is <b>Initialize(N, N)</b>, i.e., <b>M = N</b>, all with <b>p[i] = i</b> and <b>rank[i] = 0</b> (all these rank values are initially not shown). The time complexity of this operation is clearly O(<b>N</b>).</p><br><p>Due to the limitation of screen size, we set 1 ≤ <b>N</b> ≤ 32. Obviously <b>M</b> ≤ <b>N</b>.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="3" title="Go to the previous slide 3">&larr;</div>
<div class="electure-next" data-nextid="5" title="Go to the next slide 5">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-5" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p><b>FindSet(i)</b>: From vertex <b>i</b>, recursively go up the tree. That is, from vertex <b>i</b>, we go to vertex <b>p[i]</b>) until we find the root of this tree, which is the representative item with <b>p[i] = i</b> of this disjoint set.</p><br><p>In this <b>FindSet(i)</b> operation, we employ <i>path-compression</i> heuristic after each call of <b>FindSet(i)</b> as now every single vertex along the path from vertex <b>i</b> to the root know that the root is their representative item and can point to it directly in O(<b>1</b>).</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="4" title="Go to the previous slide 4">&larr;</div>
<div class="electure-next" data-nextid="5-1" title="Go to the next slide 5-1">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-5-1" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p>If we execute FindSet(12), we will immediately get vertex 12.<br>If we execute FindSet(9) we will get vertex 6 after 1 step and no other change.</p><br><p>Now try executing <span class="slide-actions" onclick="doButtonAction35()">FindSet(0)</span>. If this is your first call on this default UFDS example, it will return vertex 3 after 2 steps and then modify the underlying UFDS structure due to path-compression in action (that is, vertex 0 points to vertex 3 directly). Notice that rank value of <b>rank[1] = 1</b> is now wrong as vertex 1 becomes a new leaf. However, we will not bother to update its value.</p><br><p>Notice that the next time you execute <span class="slide-actions" onclick="doButtonAction35()">FindSet(0)</span> again, it will be (much) faster as the path has been <i>compressed</i>. For now, we assume that <b>FindSet(i)</b> runs in O(<b>1</b>).</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="5" title="Go to the previous slide 5">&larr;</div>
<div class="electure-next" data-nextid="6" title="Go to the next slide 6">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-6" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p><b>IsSameSet(i, j)</b>: Simply check if <b>FindSet(i) == FindSet(j)</b> or not. This function is used extensively in <a href="mst.html"><u>Kruskal&#39;s MST algorithm</u></a>. As it only calls <b>FindSet</b> operation twice, we will assume it also runs in O(<b>1</b>).</p><br><p>Note that <b>FindSet</b> function is called inside <b>IsSameSet</b> function, so <i>path-compression</i> heuristic is also indirectly used.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="5-1" title="Go to the previous slide 5-1">&larr;</div>
<div class="electure-next" data-nextid="6-1" title="Go to the next slide 6-1">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-6-1" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p>If we call <b>IsSameSet(3, 5)</b>, we should get false as vertex 3 and vertex 5 are representative items of their respective disjoint sets and they are different.</p><br><p>Now try <span class="slide-actions" onclick="doButtonAction36()">IsSameSet(0, 11)</span> on the same default example to see indirect <i>path-compression</i> on vertex 0 and vertex 11. We should get false as the two representative items: vertex 3 and vertex 5, are different. Notice that the rank values at vertex {1, 5, 8} are now wrong. But we will not fix them.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="6" title="Go to the previous slide 6">&larr;</div>
<div class="electure-next" data-nextid="7" title="Go to the next slide 7">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-7" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p><b>UnionSet(i, j)</b>: If item i and j come from two disjoint sets initially, we link the representative item of the <b>shorter</b> tree/disjoint set to the representative item of the <b>taller</b> tree/disjoint set (otherwise, we do nothing). This is also done in O(<b>1</b>).</p><br><p>This is <i>union-by-rank</i> heuristic in action and will cause the resulting tree to be relatively short. Only if the two trees are equally tall before union (by comparing their rank values heuristically &mdash; note that we are not comparing their actual &mdash; the current &mdash; heights), then the rank of the resulting tree will increase by one unit.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="6-1" title="Go to the previous slide 6-1">&larr;</div>
<div class="electure-next" data-nextid="7-1" title="Go to the next slide 7-1">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-7-1" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p>Also note that <b>FindSet</b> function is called inside <b>UnionSet</b> function, so <i>path-compression</i> heuristic is also indirectly used. Each time <i>path-compression</i> heuristic compresses a path, at least one rank values will be incorrect. We do not bother fixing these rank values as they are only used as guiding heuristic for this <b>UnionSet</b> function.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="7" title="Go to the previous slide 7">&larr;</div>
<div class="electure-next" data-nextid="7-2" title="Go to the next slide 7-2">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-7-2" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<p>On the same default example, try <span class="slide-actions" onclick="doButtonAction37()">UnionSet(9, 12)</span>. As the tree that represents disjoint set {6, 9} is currently taller (according to the value of <b>rank[6] = 1</b>), then the shorter tree that represents disjoint set {12} will be slotted under vertex 6, without increasing the height of the combined tree at all.</p><br><p>On the same default example, try <span class="slide-actions" onclick="doButtonAction38()">UnionSet(0, 11)</span>. Notice that the ranks of vertex 3 and vertex 5 are the same <b>rank[3] = rank[5] = 2</b>. Thus, we can either put vertex 3 under vertex 5 (our implementation) or vertex 5 under vertex 3 (both will increase the resulting height of the combined tree by 1). Notice the indirect <i>path-compression</i> heuristic in action.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="7-1" title="Go to the previous slide 7-1">&larr;</div>
<div class="electure-next" data-nextid="7-3" title="Go to the next slide 7-3">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-7-3" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<input class="mcq-answer" id="mcq-answer-8" value="41" hidden><p>Quiz: <b>Starting with N=8 disjoint sets, how tall (heuristically) can the resulting final tree if we call 7 UnionSet(i, j) operations strategically?</b></p><form><input type="radio" name="mcq-8-choice" value="39"> rank:1<br><input type="radio" name="mcq-8-choice" value="43"> rank:5<br><input type="radio" name="mcq-8-choice" value="40"> rank:2<br><input type="radio" name="mcq-8-choice" value="41"> rank:3<br><input type="radio" name="mcq-8-choice" value="42"> rank:4<br></form><button class="mcq-submit" id="submit-8">Submit</button> <span id="answer-status-8"></span><br><input class="mcq-answer" id="mcq-answer-9" value="44" hidden><p>Quiz: <b>Starting with N=8 disjoint sets, how short (heuristically) can the resulting final tree if we call 7 UnionSet(i, j) operations strategically?</b></p><form><input type="radio" name="mcq-9-choice" value="47"> rank:4<br><input type="radio" name="mcq-9-choice" value="45"> rank:2<br><input type="radio" name="mcq-9-choice" value="44"> rank:1<br><input type="radio" name="mcq-9-choice" value="46"> rank:3<br><input type="radio" name="mcq-9-choice" value="48"> rank:5<br></form><button class="mcq-submit" id="submit-9">Submit</button> <span id="answer-status-9"></span><br><br><p>Discussion: Why?</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="7-2" title="Go to the previous slide 7-2">&larr;</div>
<div class="electure-next" data-nextid="7-4" title="Go to the next slide 7-4">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-7-4" class="electure-dialog" style="bottom:230px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="7-3" title="Go to the previous slide 7-3">&larr;</div>
<div class="electure-next" data-nextid="8" title="Go to the next slide 8">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-8" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>So far, we say that <b>FindSet(i)</b>, <b>IsSameSet(i, j)</b>, and <b>UnionSet(i, j)</b> runs in O(<b>1</b>). Actually they run in O(α(<b>N</b>)) if the UFDS is implemented with both <i>path-compression</i> and <i>union-by-rank</i> heuristics. The analysis is quite involved and is skipped in this visualization.</p><br><p>This α(<b>N</b>) is called the <a href="https://en.wikipedia.org/wiki/Ackermann_function#Inverse" target="_blank"><u>inverse Ackermann function</u></a> that grows extremely slowly. For practical usage of this UFDS data structure (assuming <b>N ≤ 1M</b>), we have α(<b>1M</b>) ≈ 1.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="7-4" title="Go to the previous slide 7-4">&larr;</div>
<div class="electure-next" data-nextid="9" title="Go to the next slide 9">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>You have reached the end of the basic stuffs of this UFDS data structure and we encourage you to go to <b>Exploration Mode</b> and explore this simple but interesting data structure using your own examples.</p><br><p>However, we still have a few more interesting UFDS challenges for you.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="8" title="Go to the previous slide 8">&larr;</div>
<div class="electure-next" data-nextid="9-1" title="Go to the next slide 9-1">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-1" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>Please look at the following C++/Python/Java/OCaml implementations of this Union-Find Disjoint Sets data structure in Object-Oriented Programming (OOP) fashion: <a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/unionfind_ds.cpp" target="_blank"><u>unionfind_ds.cpp</u></a> | <a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/unionfind_ds.py" target="_blank"><u>py</u></a> | <a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/unionfind_ds.java" target="_blank"><u>java</u></a> | <a href="https://github.com/stevenhalim/cpbook-code/blob/master/ch2/ourown/unionfind_ds.ml" target="_blank"><u>ml</u></a></p><br><p>You are free to customize this implementation to suit your needs as some harder problem requires customization of this basic implementation.</p><br><p>I do wish that one day C++/Python/Java/OCaml/other programming languages will include this interesting data structure in their base libraries.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="9" title="Go to the previous slide 9">&larr;</div>
<div class="electure-next" data-nextid="9-2" title="Go to the next slide 9-2">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-2" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>For a few more interesting questions about this data structure, please practice on <a href="https://visualgo.net/training?diff=Medium&amp;n=10&amp;tl=0&amp;module=ufds"><u>Union-Find Disjoint Sets</u></a> training module.</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="9-1" title="Go to the previous slide 9-1">&larr;</div>
<div class="electure-next" data-nextid="9-3" title="Go to the next slide 9-3">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-3" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>Even after clearing the Online Quiz of this UFDS module, do you think that you have really mastered this data structure?</p><br><p>Let us challenge you by asking you to solve two programming problems that somewhat requires the usage of this Union-Find Disjoint Sets data structure: <a href="https://onlinejudge.org/external/13/1329.pdf" target="_blank"><u>UVa 01329 - Corporative Network</u></a> and <a href="https://open.kattis.com/problems/control" target="_blank"><u>Kattis - control</u></a>.</p><br><p>Beware that both problems are actual International Collegiate Programming Contest (ICPC) problems, i.e., they are "not trivial".</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="9-2" title="Go to the previous slide 9-2">&larr;</div>
<div class="electure-next" data-nextid="9-4" title="Go to the next slide 9-4">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-4" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="9-3" title="Go to the previous slide 9-3">&larr;</div>
<div class="electure-next" data-nextid="9-5" title="Go to the next slide 9-5">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-5" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<p>Notice that there is no &#39;undo&#39; operation for Union-Find Disjoint Sets (UFDS) data structure. Once two initially disjoint sets were union-ed, it is not easy to split them back into the original two disjoint sets, especially when path compressions have flattened the combined tree.</p><br><p>Discussion: So what to do if we need this &#39;de-Union&#39; or &#39;split&#39; or &#39;cut&#39; operation?</p>
<div class="electure-addition">
</div>
<div class="electure-prev" data-nextid="9-4" title="Go to the previous slide 9-4">&larr;</div>
<div class="electure-next" data-nextid="9-6" title="Go to the next slide 9-6">&rarr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="electure-9-6" class="electure-dialog" style="top:70px;left:60px;width:500px;">
<div style="background-color: white; color: black;">
<div class="electure-addition">
<p>The content of this interesting slide (the answer of the usually intriguing discussion point from the earlier slide) is hidden and only available for legitimate CS lecturer worldwide. This mechanism is used in the various <a href="https://en.wikipedia.org/wiki/Flipped_classroom" target="_blank"><u>flipped classrooms</u></a> in NUS.</p><br>
<p><b>If you are really a CS lecturer (or an IT teacher)</b> (outside of NUS) and are interested to know the answers, please drop an email to stevenhalim at gmail dot com (<b>show your University staff profile/relevant proof to Steven</b>) for Steven to manually activate this CS lecturer-only feature for you.</p><br>
<p>FAQ: This feature will <b>NOT</b> be given to anyone else who is not a CS lecturer.</p>
</div>
</div>
<div class="electure-addition">
<hr>
<p>You have reached the last slide. Return to 'Exploration Mode' to start exploring!</p>
<p>Note that if you notice any bug in this visualization or if you want to request for a new visualization feature, do not hesitate to drop an email to the project leader: Dr Steven Halim via his email address: stevenhalim at gmail dot com.</p>
</div>
<div class="electure-prev" data-nextid="9-5" title="Go to the previous slide 9-5">&larr;</div>
<div class="electure-read-status" title="Spend some more time reading this slide">&#128337;</div>
</div>
<div id="popup" hidden>
<div id="popup-content"></div>
<span id="hide-popup" hidden>X <u>Close</u></span>
</div>
<div id="rotateDeviceOverlay" style="display: none;">
<div id="rotateDeviceText" style="font-size: 45px; font-weight: bold; text-align: center">Please rotate your device to landscape mode for a better user experience</div>
<div id="widenDeviceText" style="font-size: 45px; font-weight: bold; text-align: center">Please make the window wider for a better user experience</div>
</div>

<style>
        .examples {
            bottom: 173px
        }
    </style>
<style>
        .init {
            bottom: 146px
        }
    </style>
<style>
        .find {
            bottom: 119px
        }
    </style>
<style>
        .isSameSet {
            bottom: 92px
        }
    </style>
<style>
        .union {
            bottom: 65px
        }
    </style>
<div id="actions" class="panel">
<p id="examples">Examples</p>
<p id="init">Initialize</p>
<p id="find">FindSet</p>
<p id="isSameSet">IsSameSet</p>
<p id="union">UnionSet</p>
</div>
<div id="actions-hide" class="panel-hide"><span style="color:white; font-size: x-large; display: inline-block;">&gt;</span></div>
<div id="actions-extras">
<div class="examples action-menu-pullout">
<div id="example-fourds" class="execAction new-menu-option coloured-menu-option" onClick="example(1); openAction(&#039;examples&#039;);">
<p>4 sets</p>
</div>
<div id="example-threeds" class="execAction new-menu-option coloured-menu-option" onClick="toggleChildExtras(&#039;examples&#039;, &#039;example-threeds&#039;)">
<p>3 sets</p>
<div id="example-threeds-third-tier" class="example-threeds-third-tier new-menu-option" style="display: none;">
<div id="example-threeds-2" class="execAction coloured-menu-option" style="float: right;" onClick="example(8)">
<p>GtCP 7.41</p>
</div>
<div id="example-threeds-1" class="execAction coloured-menu-option" style="float: right;" onClick="example(0)">
<p>Default</p>
</div>
</div>
</div>
<div id="example-twods" class="execAction new-menu-option coloured-menu-option" onClick="toggleChildExtras(&#039;examples&#039;, &#039;example-twods&#039;)">
<p>Two disjoint sets</p>
<div id="example-twods-third-tier" class="example-twods-third-tier new-menu-option" style="display: none;">
<div id="example-twods-5" class="execAction coloured-menu-option" style="float: right;" onClick="example(7)">
<p>CLRS3 21.4</p>
</div>
<div id="example-twods-4" class="execAction coloured-menu-option" style="float: right;" onClick="example(6)">
<p>CP4 2.11</p>
</div>
<div id="example-twods-3" class="execAction coloured-menu-option" style="float: right;" onClick="example(4)">
<p>Rank 3</p>
</div>
<div id="example-twods-2" class="execAction coloured-menu-option" style="float: right;" onClick="example(3)">
<p>Rank 2</p>
</div>
<div id="example-twods-1" class="execAction coloured-menu-option" style="float: right;" onClick="example(2)">
<p>Rank 1</p>
</div>
</div>
</div>
<div id="example-oneds" class="execAction new-menu-option coloured-menu-option" onClick="example(5); openAction(&#039;examples&#039;);">
<p>1 Tree of Rank 4</p>
</div>
<div id="examples-err" class="err" style="float: left;"></div>
</div>
<div class="init action-menu-pullout">
<div id="init-input1" class="new-menu-option">
N = <input id="arrn" type="number" autocomplete="off" min="1" max="32" value="10"> </div>
<p id="init-into-plaintext" style="transform: translate(0%, 25%);" class="new-menu-option">
items into
</p>
<div id="init-input2" class="new-menu-option">
M = <input id="arrm" type="number" autocomplete="off" min="1" max="32" value="10"> </div>
<p id="init-disjoint-plaintext" style="transform: translate(0%, 25%);" class="new-menu-option">
disjoint sets
</p>
<div id="init-go" class="execAction new-menu-option coloured-menu-option" onClick="init()">
<p>Go</p>
</div>
<div id="init-err" class="err" style="float: left;"></div>
</div>
<div class="find action-menu-pullout">
<div id="find-input" class="new-menu-option">
i = <input id="arrfindi" type="number" autocomplete="off" min="0" max="31" value="0"> </div>
<div id="find-go" class="execAction new-menu-option coloured-menu-option" onClick="find()">
<p>Go</p>
</div>
<div id="find-err" class="err" style="float: left;"></div>
</div>
<div class="isSameSet action-menu-pullout">
<div id="isSameSet-input-i" class="new-menu-option">
i = <input id="iivalue" type="number" autocomplete="off" min="0" max="31" value="0"> </div>
<div id="isSameSet-input-j" class="new-menu-option">
j = <input id="jjvalue" type="number" autocomplete="off" min="0" max="31" value="7"> </div>
<div id="isSameSet-go" class="execAction new-menu-option coloured-menu-option" onClick="issameset()">
<p>Go</p>
</div>
<div id="isSameSet-err" class="err" style="float: left;"></div>
</div>
<div class="union action-menu-pullout">
<div id="union-input-i" class="new-menu-option">
i = <input id="ivalue" type="number" autocomplete="off" min="0" max="31" value="0"> </div>
<div id="union-input-j" class="new-menu-option">
j = <input id="jvalue" type="number" autocomplete="off" min="0" max="31" value="7"> </div>
<div id="union-go" class="execAction new-menu-option coloured-menu-option" onClick="union()">
<p>Go</p>
</div>
<div id="union-err" class="err" style="float: left;"></div>
</div>
</div>

</div>

<div id="bottom-bar">
<a id="scale" style="display: none;">1.0x</a>
<a id="trigger-about">About</a>
<a id="trigger-team">Team</a>
<a id="trigger-terms">Terms of use</a>
<a id="trigger-privacy">Privacy Policy</a>
</div>
<div id="about" class="overlays">
<h4>About</h4><span class="close-overlay">&#x2715;</span>
<div class="content">
<p>Initially conceived in 2011 by Associate Professor Steven Halim, VisuAlgo aimed to facilitate a deeper understanding of data structures and algorithms for his students by providing a self-paced, interactive learning platform.</p><p>Featuring numerous advanced algorithms discussed in Dr. Steven Halim&#39;s book, &#39;Competitive Programming&#39; — co-authored with Dr. Felix Halim and Dr. Suhendry Effendy — VisuAlgo remains the exclusive platform for visualizing and animating several of these complex algorithms even after a decade.</p><p>While primarily designed for National University of Singapore (NUS) students enrolled in various data structure and algorithm courses (e.g., CS1010/equivalent, CS2040/equivalent (including IT5003), CS3230, CS3233, and CS4234), VisuAlgo also serves as a valuable resource for inquisitive minds worldwide, promoting online learning.</p><p>Initially, VisuAlgo was not designed for small touch screens like smartphones, as intricate algorithm visualizations required substantial pixel space and click-and-drag interactions. For an optimal user experience, a minimum screen resolution of 1366x768 is recommended. However, since April 2022, a mobile (lite) version of VisuAlgo has been made available, making it possible to use a subset of VisuAlgo features on smartphone screens.</p><p>VisuAlgo remains a work in progress, with the ongoing development of more complex visualizations. At present, the platform features 24 visualization modules.</p><p>Equipped with a built-in question generator and answer verifier, VisuAlgo&#39;s "online quiz system" enables students to test their knowledge of basic data structures and algorithms. Questions are randomly generated based on specific rules, and students&#39; answers are automatically graded upon submission to our grading server. As more CS instructors adopt this online quiz system worldwide, it could effectively eliminate manual basic data structure and algorithm questions from standard Computer Science exams in many universities. By assigning a small (but non-zero) weight to passing the online quiz, CS instructors can significantly enhance their students&#39; mastery of these basic concepts, as they have access to an almost unlimited number of practice questions that can be instantly verified before taking the online quiz. Each VisuAlgo visualization module now includes its own online quiz component.</p><p>VisuAlgo has been translated into three primary languages: English, Chinese, and Indonesian. Additionally, we have authored public notes about VisuAlgo in various languages, including Indonesian, Korean, Vietnamese, and Thai:</p>
<a href="https://www.facebook.com/notes/steven-halim/httpidvisualgonet-visualisasi-struktur-data-dan-algoritma-dengan-animasi/10153236934439689" target="_blank"><u>id</u></a>,
<a href="http://blog.naver.com/visualgo_nus" target="_blank"><u>kr</u></a>,
<a href="https://www.facebook.com/groups/163215593699283/permalink/824003417620494/" target="_blank"><u>vn</u></a>,
<a href="http://pantip.com/topic/32736343" target="_blank"><u>th</u></a>.
</div>
</div>
<div id="team" class="overlays">
<h4>Team</h4><span class="close-overlay">&#x2715;</span>
<div class="content">
<p>
<strong><span style="line-height: 150%;">Project Leader &amp; Advisor (Jul 2011-present)</span></strong><br>
<a href="https://www.comp.nus.edu.sg/~stevenha/" target="_blank">Associate Professor Steven Halim</a>, School of Computing (SoC), National University of Singapore (NUS)<br>
<a href="https://www.linkedin.com/in/felixhalim/" target="_blank">Dr Felix Halim</a>, Senior Software Engineer, Google (Mountain View)
</p>
<p>
<strong><span style="line-height: 150%;">Undergraduate Student Researchers 1</span></strong><br>
<b>CDTL TEG 1: Jul 2011-Apr 2012</b>: Koh Zi Chun, Victor Loh Bo Huai
</p>
<p>
<strong><span style="line-height: 150%;">Final Year Project/UROP students 1</span></strong><br>
<b>Jul 2012-Dec 2013</b>: Phan Thi Quynh Trang, Peter Phandi, Albert Millardo Tjindradinata, Nguyen Hoang Duy<br>
<b>Jun 2013-Apr 2014</b> <a href="https://www.rosemarietan.com/" target="_blank">Rose Marie Tan Zhao Yun</a>, Ivan Reinaldo
</p>
<p>
<strong><span style="line-height: 150%;">Undergraduate Student Researchers 2</span></strong><br>
<b>CDTL TEG 2: May 2014-Jul 2014</b>: Jonathan Irvin Gunawan, Nathan Azaria, Ian Leow Tze Wei, Nguyen Viet Dung, Nguyen Khac Tung, Steven Kester Yuwono, Cao Shengze, Mohan Jishnu
</p>
<p>
<strong><span style="line-height: 150%;">Final Year Project/UROP students 2</span></strong><br>
<b>Jun 2014-Apr 2015</b>: Erin Teo Yi Ling, Wang Zi<br>
<b>Jun 2016-Dec 2017</b>: Truong Ngoc Khanh, John Kevin Tjahjadi, Gabriella Michelle, Muhammad Rais Fathin Mudzakir<br>
<b>Aug 2021-Apr 2023</b>: Liu Guangyuan, Manas Vegi, Sha Long, Vuong Hoang Long, Ting Xiao, Lim Dewen Aloysius<br>
</p>
<p>
<strong><span style="line-height: 150%;">Undergraduate Student Researchers 3</span></strong><br>
<b>Optiver: Aug 2023-Oct 2023</b>: Bui Hong Duc, Oleh Naver, Tay Ngan Lin<br>
</p>
<p>
<strong><span style="line-height: 150%;">Final Year Project/UROP students 3</span></strong><br>
<b>Aug 2023-Apr 2024</b>: Xiong Jingya, Radian Krisno, Ng Wee Han<br>
</p>
<p>
List of translators who have contributed &ge; 100 translations can be found at <a href="https://visualgo.net/statistics">statistics</a> page.
</p>
<p>
<strong><span style="line-height: 150%;">Acknowledgements</span></strong><br>
NUS <a href="https://nus.edu.sg/cdtl" target="_blank"><u>CDTL</u></a> gave Teaching Enhancement Grant to kickstart this project.<div>For Academic Year 2023/24, a generous donation from Optiver will be used to further develop VisuAlgo.</div>
</p>
</div>
</div>
<div id="termsofuse" class="overlays">
<h4>Terms of use</h4><span class="close-overlay">&#x2715;</span>
<div class="content">
<p>VisuAlgo is generously offered at no cost to the global Computer Science community. If you appreciate VisuAlgo, we kindly request that you <b>spread the word about its existence to fellow Computer Science students and instructors</b>. You can share VisuAlgo through social media platforms (e.g., Facebook, YouTube, Instagram, TikTok, Twitter, etc), course webpages, blog reviews, emails, and more.</p><p>Data Structures and Algorithms (DSA) students and instructors are welcome to use this website directly for their classes. If you capture screenshots or videos from this site, feel free to use them elsewhere, provided that you cite the URL of this website (<a href="https://visualgo.net/">https://visualgo.net</a>) and/or the list of publications below as references. However, please refrain from downloading VisuAlgo&#39;s client-side files and hosting them on your website, as this constitutes plagiarism. At this time, we do not permit others to fork this project or create VisuAlgo variants. Personal use of an offline copy of the client-side VisuAlgo is acceptable.</p><p>Please note that VisuAlgo&#39;s online quiz component has a substantial server-side element, and it is not easy to save server-side scripts and databases locally. Currently, the general public can access the online quiz system only through the &#39;training mode.&#39; The &#39;test mode&#39; offers a more controlled environment for using randomly generated questions and automatic verification in real examinations at NUS.</p><p><strong><span style="line-height: 200%;">List of Publications</span></strong></p> <p>This work has been presented at the CLI Workshop at the ICPC World Finals 2012 (Poland, Warsaw) and at the IOI Conference at IOI 2012 (Sirmione-Montichiari, Italy). You can click <a href="https://ioinformatics.org/journal/INFOL099.pdf" target="_blank">this link</a> to read our 2012 paper about this system (it was not yet called VisuAlgo back in 2012) and <a href="https://ioinformatics.org/journal/v9_2015_243_245.pdf" target="_blank">this link</a> for the short update in 2015 (to link VisuAlgo name with the previous project).</p><p><strong><span style="line-height: 200%;">Bug Reports or Request for New Features</span></strong></p> <p>VisuAlgo is not a finished project. Associate Professor Steven Halim is still actively improving VisuAlgo. If you are using VisuAlgo and spot a bug in any of our visualization page/online quiz tool or if you want to request for new features, please contact Associate Professor Steven Halim. His contact is the concatenation of his name and add gmail dot com.</p>
</div>
</div>
<div id="privacy-policy" class="overlays">
<h4>Privacy Policy</h4><span class="close-overlay">&#x2715;</span>
<div class="content">
<p><b>Version 1.2 (Updated Fri, 18 Aug 2023).</b></p><p>Since Fri, 18 Aug 2023, we no longer use Google Analytics. Thus, all cookies that we use now are solely for the operations of this website. The annoying cookie-consent popup is now turned off even for first-time visitors.</p><p>Since Fri, 07 Jun 2023, thanks to a generous donation by Optiver, anyone in the world can self-create a VisuAlgo account to store a few customization settings (e.g., layout mode, default language, playback speed, etc).</p><p>Additionally, for NUS students, by using a VisuAlgo account (a tuple of NUS official email address, student name as in the class roster, and a password that is encrypted on the server side — no other personal data is stored), you are giving a consent for your course lecturer to keep track of your e-lecture slides reading and online quiz training progresses that is needed to run the course smoothly. Your VisuAlgo account will also be needed for taking NUS official VisuAlgo Online Quizzes and thus passing your account credentials to another person to do the Online Quiz on your behalf constitutes an academic offense. Your user account will be purged after the conclusion of the course unless you choose to keep your account (OPT-IN). Access to the full VisuAlgo database (with encrypted passwords) is limited to Prof Halim himself.</p><p>For other CS lecturers worldwide who have written to Steven, a VisuAlgo account (your (non-NUS) email address, you can use any display name, and encrypted password) is needed to distinguish your online credential versus the rest of the world. Your account will have CS lecturer specific features, namely the ability to see the hidden slides that contain (interesting) answers to the questions presented in the preceding slides before the hidden slides. You can also access Hard setting of the VisuAlgo Online Quizzes. You can freely use the material to enhance your data structures and algorithm classes. Note that there can be other CS lecturer specific features in the future.<br></p><p>For anyone with VisuAlgo account, you can remove your own account by yourself should you wish to no longer be associated with VisuAlgo tool.</p>
</div>
</div>
</div>


<script src="../../code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<script src="../../cdn.jsdelivr.net/npm/bootstrap%405.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="../../unpkg.com/d3-force-boundary%400.0.1/dist/d3-force-boundary.min.js"></script>
<script>
  $(function () {
    // overlays stuffs
    $('#trigger-about').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#about').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-team').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#team').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-terms').click(function() {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#termsofuse').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    });

    $('#trigger-privacy').click(function () {
      if ($(window).width() > 600) {
        $('#dark-overlay').fadeIn(function() {
          $('#privacy-policy').fadeIn();
        });
      }
      else
        alert('Sorry, this dialog is too big. Please load it on bigger screen');
    })

    $('.close-overlay').click(function() {
      $('.overlays').fadeOut(function() {
        $('#dark-overlay').fadeOut();
      });
    });

    $('#dark-overlay').click(function() {
      $('.overlays').fadeOut();
      $('#dark-overlay').fadeOut();
      if (typeof GeometryWidget !== 'undefined') {
        GeometryWidget.stopLoop();
      }
    });
  })
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1566631-4"></script>
<script>
      $.ajaxSetup({
        headers: {
          'X-CSRF-TOKEN': "dOvHLDgQSeBxDYich7PEZml1cYPqAYZaOAN2Xn3H"
        }
      });

      // handles account dropdown menu
      $(function () {
        $('#language-dropdown-btn').click(function (e) {
          $('#language-dropdown-menu').css('display', 'block');
          $('#account-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function () {
          $('#language-dropdown-menu').css('display', 'none')
        })
      })

      $(function () {
        $('#account-dropdown-btn').click(function (e) {
          $('#account-dropdown-menu').css('display', 'block')
          $('#language-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function (e) {
          $('#account-dropdown-menu').css('display', 'none')
        })
      })

      // surprise colour!
      // Referenced to in  home.js and viz.js also
      var colourArray = ["#52bc69", "#d65775"/*"#ed5a7d"*/, "#2ebbd1", "#d9513c", "#fec515", "#4b65ba", "#ff8a27", "#a7d41e"]; // green, pink, blue, red, yellow, indigo, orange, lime

      function disableScroll() { $('html').css('overflow', 'hidden'); }

      function enableScroll() { $('html').css('overflow', 'visible'); }

      function replaceAll(find, replace, str) { return str.replace(new RegExp(find, 'g'), replace); }

      function getColours() {
        var generatedColours = new Array();
        while (generatedColours.length < 4) {
          var n = (Math.floor(Math.random() * colourArray.length));
          if ($.inArray(n, generatedColours) == -1)
            generatedColours.push(n);
        }
        return generatedColours;
      }

      function isOn(value, position) {
        return (value>>position) & 1 === 1;
      }

      function customAlert(msg) {
        $('#custom-alert p').html(msg);
        var m = -1 * ($('#custom-alert').outerHeight()/2);
        $('#custom-alert').css('margin-top', m+'px');
        $('#dark-overlay').fadeIn(function() {
          $('#custom-alert').fadeIn(function() {
            setTimeout(function() {
              $('#custom-alert').fadeOut(function() {
                $('#dark-overlay').fadeOut();
              });
            }, 1000);
          });
        });
      }

      function showLoadingScreen() {
        $('#loading-overlay').show();
        $('#loading-message').show();
      }

      function hideLoadingScreen() {
        $('#loading-overlay').hide();
      }

      function commonAction(retval, msg) {
        if (retval) {
          $('#current-action').show();
          $('#current-action').html(mode == "exploration" ? msg : ("e-Lecture Example (auto play until done)<br>" + msg));
          $('#progress-bar').slider("option", "max", gw.getTotalIteration()-1);
          triggerRightPanels();
          isPlaying = true;
        }
      }

      function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; ++i) {
          var pair = vars[i].split('=');
          if (decodeURIComponent(pair[0]) == variable)
            return decodeURIComponent(pair[1]);
        }
        return "";
      }

      const MOBILE_WIDTH = 1000;
      const matchMediaMobile = window.matchMedia(`only screen and (max-width: ${MOBILE_WIDTH}px)`);
      const matchMediaNarrow = window.matchMedia(`only screen and (max-width: 500px)`);
      function isMobile() {
        return matchMediaMobile.matches;
      }
      //To fix the issue of a narrow desktop window being asked to rotate, I am now checking for it based on the navigator.userAgent to see if its mobile or not.
      //This may change in the future if browsers decide to change the naming of userAgent for mobile browsers so may need to keep an eye on this.
      function isMobileOS() {
        return /Mobi/i.test(navigator.userAgent) && !/ipad/i.test(navigator.userAgent);
      }
      let portraitMatcher = window.matchMedia("(orientation:portrait)");
      function isPortrait() {
        return portraitMatcher.matches;
      }

      var generatedColours = getColours();
      var surpriseColour = colourArray[generatedColours[0]];
      var colourTheSecond = colourArray[generatedColours[1]];
      var colourTheThird = colourArray[generatedColours[2]];
      var colourTheFourth = colourArray[generatedColours[3]];

      $(function() {
        $('.links').css('background', surpriseColour);
        $('.colour').css("color", surpriseColour);
        $('h4').css("background-color", surpriseColour); // about, contact us etc. button background

        // title
        $('#title a').click(function() {
          $('#title a').removeClass('selected-viz');
          $(this).addClass('selected-viz');
        });
      });

/*
      // GA dropped 26 Jun 2023 and then made official on 18 Aug 2023
/*
      // the sunset-ed GA, commented on 26 Jun 2023, and Prof Halim doesn't bother to use anymore
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
*/

      // function setCookie(cname, cvalue, exdays) {
      //   const d = new Date();
      //   d.setTime(d.getTime() + (exdays*24*60*60*1000));
      //   let expires = "expires="+ d.toUTCString();
      //   document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      // }

//       //         $(function() {
//           $('#gdpr-accept').click(function () {
// /*
//             // added on 26 Jun 2023
//             window.dataLayer = window.dataLayer || [];
//             function gtag(){dataLayer.push(arguments);}
//             gtag('js', new Date());

//             gtag('config', 'UA-1566631-4');
// */
// //            ga('create', 'UA-1566631-4', 'auto');
// //            ga('send', 'pageview');
//             setCookie('use_google_analytics', 'true', 365)
//             $('#gdpr-popup').hide()
//           });
//           $('#gdpr-reject').click(function () {
//             setCookie('use_google_analytics', 'false', 365)
//             $('#gdpr-popup').hide()
//           });
//         });
//       
      $('#gdpr-privacy-policy').click(function () {
        if ($(window).width() > 600) {
          $('#dark-overlay').fadeIn(function() {
            $('#privacy-policy').fadeIn();
          });
        }
        else
          alert('Sorry, this dialog is too big. Please load it on bigger screen');
      })
    </script>

<script src="../js/jquery-ui.min.js"></script>

<script src="../js/d3.min.js"></script>
<script src="../js/viz-1.0.10.js"></script>

<script src="../js/graph_library/constant.js"></script>
<script src="../js/graph_library/drawgraph.js"></script>
<script src="../js/graph_library/GraphEdgeWidget.js"></script>
<script src="../js/graph_library/GraphPolygonWidget.js"></script>
<script src="../js/graph_library/GraphVertexWidget.js"></script>
<script src="../js/graph_library/GraphWidget.js"></script>
<script src="../js/graph_library/helperObjects89db.js?refresh22aug9pm"></script> 
<script src="../js/graph_library/misc.js"></script>
<script src="../js/graph_library/properties.js"></script>
<script src="../js/graph_library/Widget.js"></script>
<script src="../js/graph_library/force_directed_library.js"></script>

<script>
      $(function () {
        let defaultPlaybackSpeed = 1;
                createPlaybackSpeedSlider(defaultPlaybackSpeed);

        $('#scale').show();

        $('#account-dropdown-btn').click(function (e) {
          $('#account-dropdown-menu').css('display', 'block')
          $('#language-dropdown-menu').css('display', 'none')
          e.stopPropagation()
        })
        $(document).click(function (e) {
          $('#account-dropdown-menu').css('display', 'none')
        });
        //Mobile Design Related DOM Manipulations
        if (isMobile()) {
          $("#status").css({
            "bottom": "10%",
            "height": "12%",
            "max-height": "54px"
          });
          $("#current-action").css("bottom", "22%");
          $('#status-hide').remove();
          $('#left-bar').remove();
          $('#right-bar').remove();
          $("#mode-menu").remove();
          $("#codetrace").css("z-index", 1);
          $("#bottom-bar a").hide();
          $("#bottom-bar").css("height", $("#topbar").css("height"));
          $(".speed-dropup-btn").show();
        $('#scale').show();
          $("#go-to-beginning").remove();
          $("#go-to-end").remove();
          $("#pause").remove();
          $("#play").remove();
          $("#previous").remove();
          $("#next").remove();

          //make progress bar longer
          $("#progress-bar").css({
            left: "30%",
            width: "60%",
            'margin-left': 0
          })
        }
      })

      let mobilePlaybackOverlayTimeout;
      $(function() {
        $("#viz").on("click", () => {
          if (isMobile()) {
            if ($("#mobile-playback-overlay").is(":hidden") && isPlaying) {
              $("#mobile-playback-overlay").fadeIn();
              hideMobilePlaybackOverlay(6000);
            } else {
              $("#mobile-playback-overlay").fadeOut();
            }
          }
        });
        $("#mobile-playback-overlay").on("click", (event) => {
          if (event.target === event.currentTarget) //to ensure clicks on the controls dont fade the overlay
            $("#mobile-playback-overlay").fadeOut();
          else
            hideMobilePlaybackOverlay(5000);
        })
      });
      function hideMobilePlaybackOverlay(timeOut) {
        if (mobilePlaybackOverlayTimeout)
          clearTimeout(mobilePlaybackOverlayTimeout);
        mobilePlaybackOverlayTimeout = setTimeout(() => {
            $("#mobile-playback-overlay").fadeOut();
        }, timeOut);
      }
      function mobilePlaybackPauseOrPlay() {
        if ($("#mobile-playback-overlay").hasClass("playing")) {
          pause();
          hideMobilePlaybackOverlay(5000);
        } else {
          play();
          hideMobilePlaybackOverlay(3000);
        }
      }
      let rewindLabelTimeout, forwardLabelTimeout;
      function mobilePlaybackRewind() {
        $("#mobile-playback-rewind-label").css("opacity", 1);
        if (rewindLabelTimeout)
          clearTimeout(rewindLabelTimeout);
        rewindLabelTimeout = setTimeout(() => {
          $("#mobile-playback-rewind-label").css("opacity", 0);
        }, 800);
        stepBackward(7);
      }
      function mobilePlaybackForward() {
        $("#mobile-playback-forward-label").css("opacity", 1);
        if (forwardLabelTimeout)
          clearTimeout(forwardLabelTimeout);
        forwardLabelTimeout = setTimeout(() => {
          $("#mobile-playback-forward-label").css("opacity", 0);
        }, 800);
        stepForward(7);
      }

      //let eLectureSessionHistory = {};
      const sectorColors = ['#05a4d0', '#f1c706', '#fa0202'];
      function setSlideTimelineColor(slideNo) {
        const sectionNo = slideNo.split('-')[0];
        $(`[slideNo="${slideNo}"]`).css('background', sectorColors[(parseInt(sectionNo) % 3)]);
      }

      let currSlideTimer = null; //global so that we can clear the timeout when required

      const lectureIds = [{"id":108,"category":"ufds","order":1,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:30:41","updated_at":"2023-06-06 06:59:31","section":-1,"code":"","section_order":-1,"value":"1","text":"<p>The Union-Find Disjoint Sets (UFDS) data structure is used to model a collection of disjoint sets, which is able to <i>efficiently (i.e., in nearly constant time)<\/i> determine which set an item belongs to, test if two items belong to the same set, and union two disjoint sets into one when needed. It can be used to find connected components in an undirected graph, and can hence be used as part of Kruskal&#39;s algorithm for the <a href=\".\/mst\"><u>Minimum Spanning Tree (MST)<\/u><\/a> problem.<\/p>","title":"Union-Find Disjoint Sets (UFDS)"},{"id":109,"category":"ufds","order":2,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:30:42","updated_at":"2021-09-28 08:30:18","section":-1,"code":"CUSTOM_ACTION('example',1);","section_order":-1,"value":"2","text":"<p>View the visualization of a sample Union-Find Disjoint Sets here!<\/p><br><p>Each tree represents a disjoint set (thus a collection of disjoint sets form <i>a forest of trees<\/i>) and the root of the tree is the representative item of this disjoint set.<\/p><br><p>Now stop and look at the currently visualized trees. How many items (<b>N<\/b>) are there overall? How many disjoint sets are there? What are the members of each disjoint set? What is the representative item of each disjoint set?<\/p>","title":"Visualization "},{"id":241,"category":"ufds","order":1,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-30 01:02:38","updated_at":"2021-09-28 08:30:24","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-1","text":"<p>As we fixed the default example for this e-Lecture, your answers should be: <b>N=13<\/b> and there are 4 disjoint sets: {0,1,2,<u>3<\/u>,4,10}, {<u>5<\/u>,7,8,11}, {<u>6<\/u>,9}, {<u>12<\/u>} with the <u>underlined<\/u> members be the representative items (of their own disjoint set).<\/p>","title":"Checkpoint 1"},{"id":240,"category":"ufds","order":2,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-26 02:14:20","updated_at":"2022-09-29 08:26:52","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-2","text":"<p>We can simply record this <i>forest of trees<\/i> with an array <b>p<\/b> of size <b>N<\/b> items where <b>p[i]<\/b> records the parent of item <b>i<\/b> and if <b>p[i] = i<\/b>, then <b>i<\/b> is the root of this tree and also the representative item of the set that contains item <b>i<\/b>.<\/p><br><p>Once again, look at the visualization above and determine the values inside this array <b>p<\/b>.<\/p><br><p>Discuss: If <b>i<\/b> is the root of the tree that contains it, can we set <b>p[i] = -1<\/b> instead of <b>p[i] = i<\/b>? What are the implications?<\/p>","title":"Storing the Data - Part 1"},{"id":820,"category":"ufds","order":3,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2022-09-29 08:26:57","updated_at":"2022-09-29 08:28:17","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-3","text":"<p>Setting <b>p[i] = -1<\/b> also works and eliminates the &#39;self-loop&#39; case. We have to edit our code to test this instead of testing <b>p[i] = i<\/b>.<\/p><br><p>It is up to you which version that you prefer.<\/p>","title":"The Implications"},{"id":242,"category":"ufds","order":4,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-30 01:07:53","updated_at":"2022-09-29 08:26:59","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-4","text":"<p>On the same fixed example, your answers should be <b>p = [1, 3, 3, 3, 3, 5, 6, 5, 5, 6, 4, 8,12]<\/b> of size <b>N = 13<\/b> ranging from <b>p[0] to <b>p[12]<\/b>.<\/b><\/p><br><p>You can check that <b>p[3] = 3<\/b>, <b>p[5] = 5<\/b>, <b>p[6] = 6<\/b>, and <b>p[12] = 12<\/b>, which are consistent with the fact that {3,5,6,12} are the representative items (of their own disjoint set).<\/p>","title":"Checkpoint 2"},{"id":243,"category":"ufds","order":5,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-30 01:11:23","updated_at":"2022-09-29 08:26:59","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-5","text":"<p>We also record one more information in array <b>rank<\/b> also of size <b>N<\/b>. The value of <b>rank[i]<\/b> is the <i>upperbound<\/i> of the height of subtree rooted at vertex <b>i<\/b> that will be used as <i>guiding heuristic<\/i> for <b>UnionSet(i, j)<\/b> operation. You will notice that after &#39;path-compression&#39; heuristic (to be described later) compresses some path, the rank values no longer reflect the true height of that subtree.<\/p><br><p>As there are many items with rank 0, we set the visualization as follows to minimize clutter: Only when the rank of a vertex <b>i<\/b> is greater than 0, then VisuAlgo will show the value of <b>rank[i]<\/b> (abbreviated as a single character <b>r<\/b>) as a <span style=\"color: red;\">red text<\/span> below vertex <b>i<\/b>.<\/p>","title":" Storing the Data - Part 2"},{"id":244,"category":"ufds","order":6,"top":"280px","right":"","bottom":"","left":"50%","marginLeft":"-250px","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-30 01:15:02","updated_at":"2022-09-29 08:26:59","section":109,"code":"CUSTOM_ACTION('example',1);","section_order":2,"value":"2-6","text":"<p>On the same fixed example, verify that {1,4,6,8} have rank 1 and {3,5} have rank 2, with the rest having rank 0 (not shown).<\/p><br><p>At this point of time, all rank values are correct, i.e., they really describe the height of the subtree rooted at that vertex. We will soon see that they will not be always correct in the next few slides.<\/p>","title":"Checkpoint 3"},{"id":110,"category":"ufds","order":3,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:31:57","updated_at":"2021-12-20 02:40:01","section":-1,"code":"$('#examples').click().addClass(\"menu-highlighted\");","section_order":-1,"value":"3","text":"<p>There are five available UFDS operations in this visualization page:<br><b>Examples<\/b>, <b>Initialize(N)<\/b>, <b>FindSet(i)<\/b>, <b>IsSameSet(i, j)<\/b>, and <b>UnionSet(i, j)<\/b>.<\/p><br><p>The first operation (<b>Examples<\/b>) is trivial: List of example UFDS structures with various special characteristics for your starting point. This e-Lecture mode always use the &#39;<b>Four disjoint sets<\/b>&#39; example as the starting point.<\/p><br><p>Also notice that none of the example contains a &#39;very tall&#39; tree. You will soon understand the reason after we describe the two heuristics used.<\/p>","title":"Operations "},{"id":111,"category":"ufds","order":4,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:32:21","updated_at":"2023-06-06 10:36:37","section":-1,"code":"$('#init').click().addClass(\"menu-highlighted\");","section_order":-1,"value":"4","text":"<p><b>Initialize(N, M)<\/b>: Create <b>N<\/b> items and form <b>M<\/b> disjoint sets with these <b>N<\/b> items. We randomly pick two disjoint sets and merge them until we have <b>M<\/b> random disjoint sets. Due to the union-by-rank heuristics used and the randomness, it is very unlikely that this initialization process creates a tall tree.<\/p><br><p>The default form is <b>Initialize(N, N)<\/b>, i.e., <b>M = N<\/b>, all with <b>p[i] = i<\/b> and <b>rank[i] = 0<\/b> (all these rank values are initially not shown). The time complexity of this operation is clearly O(<b>N<\/b>).<\/p><br><p>Due to the limitation of screen size, we set 1 \u2264 <b>N<\/b> \u2264 32. Obviously <b>M<\/b> \u2264 <b>N<\/b>.<\/p>","title":"Initialize(N, M)"},{"id":112,"category":"ufds","order":5,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:32:47","updated_at":"2017-05-23 02:07:30","section":-1,"code":"$('#find').click().addClass(\"menu-highlighted\");","section_order":-1,"value":"5","text":"<p><b>FindSet(i)<\/b>: From vertex <b>i<\/b>, recursively go up the tree. That is, from vertex <b>i<\/b>, we go to vertex <b>p[i]<\/b>) until we find the root of this tree, which is the representative item with <b>p[i] = i<\/b> of this disjoint set.<\/p><br><p>In this <b>FindSet(i)<\/b> operation, we employ <i>path-compression<\/i> heuristic after each call of <b>FindSet(i)<\/b> as now every single vertex along the path from vertex <b>i<\/b> to the root know that the root is their representative item and can point to it directly in O(<b>1<\/b>).<\/p>","title":"FindSet(i)"},{"id":245,"category":"ufds","order":1,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-30 06:48:49","updated_at":"2022-09-29 08:29:21","section":112,"code":"$('#find').click().addClass(\"menu-highlighted\");\nCUSTOM_ACTION('example',1);","section_order":5,"value":"5-1","text":"<p>If we execute FindSet(12), we will immediately get vertex 12.<br>If we execute FindSet(9) we will get vertex 6 after 1 step and no other change.<\/p><br><p>Now try executing <span class=\"slide-actions\" onclick=\"doButtonAction35()\">FindSet(0)<\/span>. If this is your first call on this default UFDS example, it will return vertex 3 after 2 steps and then modify the underlying UFDS structure due to path-compression in action (that is, vertex 0 points to vertex 3 directly). Notice that rank value of <b>rank[1] = 1<\/b> is now wrong as vertex 1 becomes a new leaf. However, we will not bother to update its value.<\/p><br><p>Notice that the next time you execute <span class=\"slide-actions\" onclick=\"doButtonAction35()\">FindSet(0)<\/span> again, it will be (much) faster as the path has been <i>compressed<\/i>. For now, we assume that <b>FindSet(i)<\/b> runs in O(<b>1<\/b>).<\/p>","title":"Hands-on Examples"},{"id":113,"category":"ufds","order":6,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:33:09","updated_at":"2017-05-23 02:08:16","section":-1,"code":"$('#isSameSet').click().addClass(\"menu-highlighted\");","section_order":-1,"value":"6","text":"<p><b>IsSameSet(i, j)<\/b>: Simply check if <b>FindSet(i) == FindSet(j)<\/b> or not. This function is used extensively in <a href=\".\/mst\"><u>Kruskal&#39;s MST algorithm<\/u><\/a>. As it only calls <b>FindSet<\/b> operation twice, we will assume it also runs in O(<b>1<\/b>).<\/p><br><p>Note that <b>FindSet<\/b> function is called inside <b>IsSameSet<\/b> function, so <i>path-compression<\/i> heuristic is also indirectly used.<\/p>","title":"IsSameSet(i, j)"},{"id":250,"category":"ufds","order":1,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-01 14:27:41","updated_at":"2017-05-23 02:32:25","section":113,"code":"$('#find').click().addClass(\"menu-highlighted\");\nCUSTOM_ACTION('example',1);","section_order":6,"value":"6-1","text":"<p>If we call <b>IsSameSet(3, 5)<\/b>, we should get false as vertex 3 and vertex 5 are representative items of their respective disjoint sets and they are different.<\/p><br><p>Now try <span class=\"slide-actions\" onclick=\"doButtonAction36()\">IsSameSet(0, 11)<\/span> on the same default example to see indirect <i>path-compression<\/i> on vertex 0 and vertex 11. We should get false as the two representative items: vertex 3 and vertex 5, are different. Notice that the rank values at vertex {1, 5, 8} are now wrong. But we will not fix them.<\/p>","title":"Hands-on Examples"},{"id":114,"category":"ufds","order":7,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-02-19 12:33:42","updated_at":"2022-09-29 08:30:33","section":-1,"code":"$('#union').click().addClass(\"menu-highlighted\");","section_order":-1,"value":"7","text":"<p><b>UnionSet(i, j)<\/b>: If item i and j come from two disjoint sets initially, we link the representative item of the <b>shorter<\/b> tree\/disjoint set to the representative item of the <b>taller<\/b> tree\/disjoint set (otherwise, we do nothing). This is also done in O(<b>1<\/b>).<\/p><br><p>This is <i>union-by-rank<\/i> heuristic in action and will cause the resulting tree to be relatively short. Only if the two trees are equally tall before union (by comparing their rank values heuristically &mdash; note that we are not comparing their actual &mdash; the current &mdash; heights), then the rank of the resulting tree will increase by one unit.<\/p>","title":"UnionSet(i, j)"},{"id":253,"category":"ufds","order":1,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-01 15:24:38","updated_at":"2017-05-23 02:08:23","section":114,"code":"$('#union').click().addClass(\"menu-highlighted\");","section_order":7,"value":"7-1","text":"<p>Also note that <b>FindSet<\/b> function is called inside <b>UnionSet<\/b> function, so <i>path-compression<\/i> heuristic is also indirectly used. Each time <i>path-compression<\/i> heuristic compresses a path, at least one rank values will be incorrect. We do not bother fixing these rank values as they are only used as guiding heuristic for this <b>UnionSet<\/b> function.<\/p>","title":"Indirect Path Compression"},{"id":251,"category":"ufds","order":2,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-01 14:34:44","updated_at":"2022-09-29 08:31:32","section":114,"code":"$('#union').click().addClass(\"menu-highlighted\");\nCUSTOM_ACTION('example',1);","section_order":7,"value":"7-2","text":"<p>On the same default example, try <span class=\"slide-actions\" onclick=\"doButtonAction37()\">UnionSet(9, 12)<\/span>. As the tree that represents disjoint set {6, 9} is currently taller (according to the value of <b>rank[6] = 1<\/b>), then the shorter tree that represents disjoint set {12} will be slotted under vertex 6, without increasing the height of the combined tree at all.<\/p><br><p>On the same default example, try <span class=\"slide-actions\" onclick=\"doButtonAction38()\">UnionSet(0, 11)<\/span>. Notice that the ranks of vertex 3 and vertex 5 are the same <b>rank[3] = rank[5] = 2<\/b>. Thus, we can either put vertex 3 under vertex 5 (our implementation) or vertex 5 under vertex 3 (both will increase the resulting height of the combined tree by 1). Notice the indirect <i>path-compression<\/i> heuristic in action.<\/p>","title":"Hands-on Examples"},{"id":254,"category":"ufds","order":3,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-01 15:31:39","updated_at":"2017-05-23 02:08:29","section":114,"code":"$('#union').click().addClass(\"menu-highlighted\");\n","section_order":7,"value":"7-3","text":"<input class=\"mcq-answer\" id=\"mcq-answer-8\" value=\"41\" hidden><p>Quiz: <b>Starting with N=8 disjoint sets, how tall (heuristically) can the resulting final tree if we call 7 UnionSet(i, j) operations strategically?<\/b><\/p><form><input type=\"radio\" name=\"mcq-8-choice\" value=\"39\"> rank:1<br><input type=\"radio\" name=\"mcq-8-choice\" value=\"43\"> rank:5<br><input type=\"radio\" name=\"mcq-8-choice\" value=\"40\"> rank:2<br><input type=\"radio\" name=\"mcq-8-choice\" value=\"41\"> rank:3<br><input type=\"radio\" name=\"mcq-8-choice\" value=\"42\"> rank:4<br><\/form><button class=\"mcq-submit\" id=\"submit-8\">Submit<\/button> <span id=\"answer-status-8\"><\/span><br><input class=\"mcq-answer\" id=\"mcq-answer-9\" value=\"44\" hidden><p>Quiz: <b>Starting with N=8 disjoint sets, how short (heuristically) can the resulting final tree if we call 7 UnionSet(i, j) operations strategically?<\/b><\/p><form><input type=\"radio\" name=\"mcq-9-choice\" value=\"47\"> rank:4<br><input type=\"radio\" name=\"mcq-9-choice\" value=\"45\"> rank:2<br><input type=\"radio\" name=\"mcq-9-choice\" value=\"44\"> rank:1<br><input type=\"radio\" name=\"mcq-9-choice\" value=\"46\"> rank:3<br><input type=\"radio\" name=\"mcq-9-choice\" value=\"48\"> rank:5<br><\/form><button class=\"mcq-submit\" id=\"submit-9\">Submit<\/button> <span id=\"answer-status-9\"><\/span><br><br><p>Discussion: Why?<\/p>","title":"Mini Quizzes"},{"id":452,"category":"ufds","order":4,"top":"","right":"","bottom":"230px","left":"60px","marginLeft":"","width":"500px","showActionsPanel":1,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2017-05-23 02:11:29","updated_at":"2017-05-23 02:54:18","section":114,"code":"$('#union').click().addClass(\"menu-highlighted\");","section_order":7,"value":"7-4","text":"<p>The tallest possible tree has rank: 3, see <span class=\"slide-actions\" onclick=\"doButtonAction73()\">Tallest Tree<\/span>. To be able to get this structure, we need to use perfect binary tree UnionSet strategy that totally <b>avoid<\/b> the indirect usage of Path Compression. We call:<\/p><ol><li>UnionSet(0,1), UnionSet(2,3), UnionSet(4,5), and UnionSet(6,7) at the lowest level,<\/li><li>UnionSet(1,3) and UnionSet(5,7), at the middle level,<\/li><li>Lastly, we call UnionSet(3,7) at the tallest possible level.<\/li><\/ol><p>The shortest possible tree has rank: 1, see <span class=\"slide-actions\" onclick=\"doButtonAction74()\">Shortest Tree<\/span>. We keep calling UnionSet(x,0) \u2200x \u2208 [1..7].<\/p>","title":"The Answer"},{"id":252,"category":"ufds","order":8,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-05-01 14:48:26","updated_at":"2023-06-06 10:38:37","section":-1,"code":"","section_order":-1,"value":"8","text":"<p>So far, we say that <b>FindSet(i)<\/b>, <b>IsSameSet(i, j)<\/b>, and <b>UnionSet(i, j)<\/b> runs in O(<b>1<\/b>). Actually they run in O(\u03b1(<b>N<\/b>)) if the UFDS is implemented with both <i>path-compression<\/i> and <i>union-by-rank<\/i> heuristics. The analysis is quite involved and is skipped in this visualization.<\/p><br><p>This \u03b1(<b>N<\/b>) is called the <a href=\"https:\/\/en.wikipedia.org\/wiki\/Ackermann_function#Inverse\" target=\"_blank\"><u>inverse Ackermann function<\/u><\/a> that grows extremely slowly. For practical usage of this UFDS data structure (assuming <b>N \u2264 1M<\/b>), we have \u03b1(<b>1M<\/b>) \u2248 1.<\/p>","title":"Actual Time Complexities"},{"id":219,"category":"ufds","order":9,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-16 12:19:51","updated_at":"2023-06-06 10:38:40","section":-1,"code":"","section_order":-1,"value":"9","text":"<p>You have reached the end of the basic stuffs of this UFDS data structure and we encourage you to go to <b>Exploration Mode<\/b> and explore this simple but interesting data structure using your own examples.<\/p><br><p>However, we still have a few more interesting UFDS challenges for you.<\/p>","title":"Extras"},{"id":221,"category":"ufds","order":1,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-16 12:37:30","updated_at":"2023-06-06 10:38:42","section":219,"code":"","section_order":9,"value":"9-1","text":"<p>Please look at the following C++\/Python\/Java\/OCaml implementations of this Union-Find Disjoint Sets data structure in Object-Oriented Programming (OOP) fashion: <a href=\"https:\/\/github.com\/stevenhalim\/cpbook-code\/blob\/master\/ch2\/ourown\/unionfind_ds.cpp\" target=\"_blank\"><u>unionfind_ds.cpp<\/u><\/a> | <a href=\"https:\/\/github.com\/stevenhalim\/cpbook-code\/blob\/master\/ch2\/ourown\/unionfind_ds.py\" target=\"_blank\"><u>py<\/u><\/a> | <a href=\"https:\/\/github.com\/stevenhalim\/cpbook-code\/blob\/master\/ch2\/ourown\/unionfind_ds.java\" target=\"_blank\"><u>java<\/u><\/a> | <a href=\"https:\/\/github.com\/stevenhalim\/cpbook-code\/blob\/master\/ch2\/ourown\/unionfind_ds.ml\" target=\"_blank\"><u>ml<\/u><\/a><\/p><br><p>You are free to customize this implementation to suit your needs as some harder problem requires customization of this basic implementation.<\/p><br><p>I do wish that one day C++\/Python\/Java\/OCaml\/other programming languages will include this interesting data structure in their base libraries.<\/p>","title":"Source Code"},{"id":223,"category":"ufds","order":2,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-16 12:39:27","updated_at":"2023-06-06 10:38:45","section":219,"code":"","section_order":9,"value":"9-2","text":"<p>For a few more interesting questions about this data structure, please practice on <a href=\"https:\/\/visualgo.net\/training?diff=Medium&amp;n=10&amp;tl=0&amp;module=ufds\"><u>Union-Find Disjoint Sets<\/u><\/a> training module.<\/p>","title":"Online Quiz"},{"id":222,"category":"ufds","order":3,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2017-04-16 12:39:02","updated_at":"2023-06-06 10:38:47","section":219,"code":"","section_order":9,"value":"9-3","text":"<p>Even after clearing the Online Quiz of this UFDS module, do you think that you have really mastered this data structure?<\/p><br><p>Let us challenge you by asking you to solve two programming problems that somewhat requires the usage of this Union-Find Disjoint Sets data structure: <a href=\"https:\/\/onlinejudge.org\/external\/13\/1329.pdf\" target=\"_blank\"><u>UVa 01329 - Corporative Network<\/u><\/a> and <a href=\"https:\/\/open.kattis.com\/problems\/control\" target=\"_blank\"><u>Kattis - control<\/u><\/a>.<\/p><br><p>Beware that both problems are actual International Collegiate Programming Contest (ICPC) problems, i.e., they are \"not trivial\".<\/p>","title":"Online Judge Exercises"},{"id":777,"category":"ufds","order":4,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2022-03-02 02:57:01","updated_at":"2023-06-06 10:38:49","section":219,"code":"","section_order":9,"value":"9-4","text":"<p>For UVa 01329 - Corporative Network, we need to augment each root of the trees in our UFDS with one extra information: len[I] = length of line from I to its serving server at the moment.<\/p><br><p>For Kattis - control, we need to augment each root of the trees in our UFDS with one extra information: setSize[i] = size of tree rooted at i.<\/p>","title":"The Hints"},{"id":778,"category":"ufds","order":5,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":0,"created_at":"2022-03-02 02:57:48","updated_at":"2023-06-06 10:38:52","section":219,"code":"","section_order":9,"value":"9-5","text":"<p>Notice that there is no &#39;undo&#39; operation for Union-Find Disjoint Sets (UFDS) data structure. Once two initially disjoint sets were union-ed, it is not easy to split them back into the original two disjoint sets, especially when path compressions have flattened the combined tree.<\/p><br><p>Discussion: So what to do if we need this &#39;de-Union&#39; or &#39;split&#39; or &#39;cut&#39; operation?<\/p>","title":"Union, Find, de-Union?"},{"id":779,"category":"ufds","order":6,"top":"70px","right":"","bottom":"","left":"60px","marginLeft":"","width":"500px","showActionsPanel":0,"showStatusPanel":0,"showCodetracePanel":1,"created_at":"2022-03-02 03:07:15","updated_at":"2023-06-06 10:38:53","section":219,"code":"","section_order":9,"value":"9-6","text":"<p>If what we need to do is to split an initially connected graph into multiple connected components one by one. We can actually use UFDS in reverse (instead of splitting, we union from the last operation back to the first operation).<\/p><br><p>For more general dynamic graph connectivity problem where union and de-union can be interleaved, perhaps another data structure is needed, e.g., this <a href=\"https:\/\/en.wikipedia.org\/wiki\/Link\/cut_tree\" target=\"_blank\"><u>Link\/cut Tree<\/u><\/a>.<\/p>","title":"The Answer"}];
      const numSlides = lectureIds.length;
      var sectorJunction12Section = 0, sectorJunction12Slide = 0;
      var sectorJunction23Section = 0, sectorJunction23Slide = 0;
      var sector1Count = 0, sector2Count = 0, sector3Count = 0;
      const sectorLength = Math.floor(numSlides / 3);
      function createELectureTimelineDisplay() {
        for (let j = 0; j < numSlides; ++j) {
          const currLecture = lectureIds[j].value;
          if (currLecture.includes('-')) {
            $('#e-lecture-timeline').append(
              $(`<div class="e-lecture-timeline-slide" slideNo=${lectureIds[j].value}></div>`)
            );
          } else {
            $('#e-lecture-timeline').append(
              $(`<div class="e-lecture-timeline-checkpoint" slideNo=${lectureIds[j].value}></div>`)
            );
          }
        }
      }

      function setSectorJunctionInfo() {
          //setting the sector junction slide numbers
          const j12 = sectorLength !== 0 ? (sectorLength - 1): 0;
          const j23 = sectorLength !== 0 ? (2 * sectorLength - 1) : 0;

          const sectorJunction12 = lectureIds[j12].value.split('-');
          sectorJunction12Section = parseInt(sectorJunction12[0]);
          sectorJunction12Slide = sectorJunction12.length > 1 ? parseInt(sectorJunction12[1]) : sectorJunction12Slide;

          const sectorJunction23 = lectureIds[j23].value.split('-');
          sectorJunction23Section = parseInt(sectorJunction23[0]);
          sectorJunction23Slide = sectorJunction23.length > 1 ? parseInt(sectorJunction23[1]) : sectorJunction23Slide;
      }

      function runSlide(slide) { // Steven's patch on 28 Jan 2022: Properly remove slide 99, 99-1, 99-2, 99-3, integrate with the earlier slides
        if (slide == '1') {
          $("#e-lecture").html("slide " + slide + " (" + 3 + "%)");
          
        }
        if (slide == '2') {
          $("#e-lecture").html("slide " + slide + " (" + 7 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-1') {
          $("#e-lecture").html("slide " + slide + " (" + 11 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-2') {
          $("#e-lecture").html("slide " + slide + " (" + 14 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-3') {
          $("#e-lecture").html("slide " + slide + " (" + 18 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-4') {
          $("#e-lecture").html("slide " + slide + " (" + 22 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-5') {
          $("#e-lecture").html("slide " + slide + " (" + 25 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '2-6') {
          $("#e-lecture").html("slide " + slide + " (" + 29 + "%)");
          CUSTOM_ACTION('example',1);
        }
        if (slide == '3') {
          $("#e-lecture").html("slide " + slide + " (" + 33 + "%)");
          $('#examples').click().addClass("menu-highlighted");
        }
        if (slide == '4') {
          $("#e-lecture").html("slide " + slide + " (" + 37 + "%)");
          $('#init').click().addClass("menu-highlighted");
        }
        if (slide == '5') {
          $("#e-lecture").html("slide " + slide + " (" + 40 + "%)");
          $('#find').click().addClass("menu-highlighted");
        }
        if (slide == '5-1') {
          $("#e-lecture").html("slide " + slide + " (" + 44 + "%)");
          $('#find').click().addClass("menu-highlighted");
CUSTOM_ACTION('example',1);
        }
        if (slide == '6') {
          $("#e-lecture").html("slide " + slide + " (" + 48 + "%)");
          $('#isSameSet').click().addClass("menu-highlighted");
        }
        if (slide == '6-1') {
          $("#e-lecture").html("slide " + slide + " (" + 51 + "%)");
          $('#find').click().addClass("menu-highlighted");
CUSTOM_ACTION('example',1);
        }
        if (slide == '7') {
          $("#e-lecture").html("slide " + slide + " (" + 55 + "%)");
          $('#union').click().addClass("menu-highlighted");
        }
        if (slide == '7-1') {
          $("#e-lecture").html("slide " + slide + " (" + 59 + "%)");
          $('#union').click().addClass("menu-highlighted");
        }
        if (slide == '7-2') {
          $("#e-lecture").html("slide " + slide + " (" + 62 + "%)");
          $('#union').click().addClass("menu-highlighted");
CUSTOM_ACTION('example',1);
        }
        if (slide == '7-3') {
          $("#e-lecture").html("slide " + slide + " (" + 66 + "%)");
          $('#union').click().addClass("menu-highlighted");

        }
        if (slide == '7-4') {
          $("#e-lecture").html("slide " + slide + " (" + 70 + "%)");
          $('#union').click().addClass("menu-highlighted");
        }
        if (slide == '8') {
          $("#e-lecture").html("slide " + slide + " (" + 74 + "%)");
          
        }
        if (slide == '9') {
          $("#e-lecture").html("slide " + slide + " (" + 77 + "%)");
          
        }
        if (slide == '9-1') {
          $("#e-lecture").html("slide " + slide + " (" + 81 + "%)");
          
        }
        if (slide == '9-2') {
          $("#e-lecture").html("slide " + slide + " (" + 85 + "%)");
          
        }
        if (slide == '9-3') {
          $("#e-lecture").html("slide " + slide + " (" + 88 + "%)");
          
        }
        if (slide == '9-4') {
          $("#e-lecture").html("slide " + slide + " (" + 92 + "%)");
          
        }
        if (slide == '9-5') {
          $("#e-lecture").html("slide " + slide + " (" + 96 + "%)");
          
        }
        if (slide == '9-6') {
          $("#e-lecture").html("slide " + slide + " (" + 100 + "%)");
          
        }
        clearTimeout(currSlideTimer);
      }

      window.onpopstate = function(event) {
        var slide = event.state['slide'];
        openSlide(slide, function() {
          runSlide(slide);
        });
      };

      function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'), sParameterName, i;

        for (i = 0; i < sURLVariables.length; i++) {
          sParameterName = sURLVariables[i].split('=');
          if (sParameterName[0] === sParam) return sParameterName[1] === undefined ? true : sParameterName[1];
        }
      };
      var slideTimeline = {};

      //reads all visited slides in the slideTimeline and gives them their sector color
      function setVisitedSlideTimelineColors() {
        for(const [sectionNo, visitedSlides] of Object.entries(slideTimeline)) {
          const visitedSlides = slideTimeline[sectionNo];
          for(const visitedSlideNo of visitedSlides) {
            setSlideTimelineColor(visitedSlideNo);
          }
        }
      }

      //only called on load if there is nothing in session
      function setTimelineForCompletedSector(sectorNum) {
        let len = sectorLength;
        switch (sectorNum) {
          case 1 : len = sectorLength; break;
          case 2 : len = 2 * sectorLength; break;
          default: len = numSlides;
        }
        let i = 0;
        switch (sectorNum) {
          case 1 : i = 0; break;
          case 2 : i = sectorLength; break;
          default: i = 2 * sectorLength;
        }
        for (; i < len; i++) {
          saveELectureTimeline(lectureIds[i].value, true);
        }
      }

      function getUserSectorHistory(callback) {
        $.ajax({
          type: 'GET',
          url: "https://visualgo.net/section-info",
          data: {
            _token: "dOvHLDgQSeBxDYich7PEZml1cYPqAYZaOAN2Xn3H",
            topic: "/ufds".substring(1)
          }
        }
        ).done(function (data) {
            if (data.data[0] === 1) {
              setF1SectorColor(1);
              setTimelineForCompletedSector(1);
            }
            if (data.data[1] === 1) {
              setF1SectorColor(2);
              setTimelineForCompletedSector(2);
            }
            if (data.data[2] === 1) {
              setF1SectorColor(3);
              setTimelineForCompletedSector(3);
            }
            callback();
        }).fail(function (data) {
            console.log('get user sector history failed!');
        });
      }

      function getELectureTimelineFromSession() {
        const page = "/ufds".substring(1);
        const timelineKey = page + '-slide-timeline';
        const storedTimeline = window.sessionStorage.getItem(timelineKey);
        if (storedTimeline) {
          slideTimeline = JSON.parse(storedTimeline);
        } else {
          return false;
        }
        let slideInfo = [];
        for (const [sectionNum, slides] of Object.entries(slideTimeline)) {
          for (const slide of slides) {
            indicateSlideCompletedUI(slide);
            slideInfo = slide.split('-');
            incrementSectorVisits(parseInt(sectionNum), slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0);
          }
        }
        return true;
      }

      async function initializeELectureTimeline() {
        setSectorJunctionInfo();
        if (!getELectureTimelineFromSession())
          getUserSectorHistory(sectorBasedModeSelection);
        else
          sectorBasedModeSelection();

        createELectureTimelineDisplay();
        setVisitedSlideTimelineColors();
      }

      function setF1SectorColor(sectorNum) {
        $(`[sectorNo="${sectorNum}"]`).css('background', sectorColors[(parseInt(sectorNum) % 3)]);
      }

      function updateSectorInDB(sectorNum) {
        $.ajax({
          type: 'POST',
          url: "https://visualgo.net/section-info",
          data: {
            _token: "dOvHLDgQSeBxDYich7PEZml1cYPqAYZaOAN2Xn3H",
            section: (sectorNum - 1),
            topic: "/ufds".substring(1)
          }
        }
        ).done(function (data) {
            //console.log("Saved the sector " + sectorNum + " as done " + JSON.stringify(data));
        }).fail(function (data) {
            console.log("Setting sector done failed new attempt! "+ JSON.stringify(data));
        });
      }

      //If 87.5% or more of the slides in sector are done
      function setF1SectorCompleted(sectorNum, isInitializationCall) {
        setF1SectorColor(sectorNum);
        //avoid api call on initialization
        if (!isInitializationCall) {
          updateSectorInDB(sectorNum);
          $(`[sectorNo="${sectorNum}"]`).css("animation", "green-pulse 2s 4");
          setTimeout(() => {
            $(`[sectorNo="${sectorNum}"]`).css("animation", "");
          }, 8000);
        }
      }

      function incrementSectorVisits(sectionNum, slideNumWithinSection, isInitializationCall) {
        //updating sector count
        if (sectionNum < sectorJunction12Section
          || (sectionNum === sectorJunction12Section && slideNumWithinSection <= sectorJunction12Slide)) {
          ++sector1Count;
          if (sector1Count >= Math.ceil(0.875 * sectorLength))
            setF1SectorCompleted(1, isInitializationCall);
        } else if (sectionNum < sectorJunction23Section
          || (sectionNum === sectorJunction23Section && slideNumWithinSection <= sectorJunction23Slide)) {
          ++sector2Count;
          if (sector2Count >= Math.ceil(0.875 * sectorLength))
            setF1SectorCompleted(2, isInitializationCall);
        } else {
          ++sector3Count;
          if (sector3Count >= Math.ceil(0.875 * (numSlides - 2 * sectorLength)))
            setF1SectorCompleted(3, isInitializationCall);
        }
      }

      function saveELectureTimeline(slideNo, isInitialization) {
        const slideInfo = slideNo.split('-');
        const sectionNo = slideInfo[0];
        const slideNumWithinSection = slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0;
        if (slideTimeline[sectionNo]) {
          if (!slideTimeline[sectionNo].includes(slideNo)) {
            slideTimeline[sectionNo].push(slideNo);
            const sectionNum = parseInt(sectionNo);
            incrementSectorVisits(sectionNum, slideNumWithinSection, isInitialization);
          }
        } else {
          slideTimeline[sectionNo] = [];
          slideTimeline[sectionNo].push(slideNo);
          const sectionNum = parseInt(sectionNo);
          incrementSectorVisits(sectionNum, slideNumWithinSection, isInitialization);
        }
        setSlideTimelineColor(slideNo);
        indicateSlideCompletedUI(slideNo);
      }

      function saveELectureTimelineToSession() {
        const page = "/ufds".substring(1);
        const timelineKey = page + '-slide-timeline';
        window.sessionStorage.setItem(timelineKey, JSON.stringify(slideTimeline));
      }

      function handleTimelineOnRunSlide(slideValue) {
        const slideInfo = slideValue.split('-');
        const sectionNo = slideInfo[0];
        const slideNumWithinSection = slideInfo.length > 1 ? parseInt(slideInfo[1]) : 0;
        //start timer only if the slide isnt already done
        if (!slideTimeline[sectionNo] || !slideTimeline[sectionNo].includes(slideValue)) {
          const slideTextLength = $('#electure-'+slideValue + " p").text().length + $('#electure-'+slideValue + " li").text().length;
          const CHARS_READ_PER_MS = 0.05; //when fast, 50 characters a second
          //setting max reading time as 10 seconds for around 500 character slide
          const minSlideReadingTime = Math.min(Math.max(2000, (slideTextLength / CHARS_READ_PER_MS) +  + (2000 * $('#electure-'+slideValue + " img").length)), 10000);
          currSlideTimer = setTimeout(() => {
            saveELectureTimeline(slideValue);
          }, minSlideReadingTime);
        }
      }

      function indicateSlideCompletedUI(slide) {
        $('#electure-'+slide).css("box-shadow", "3px 3px 8px green"); //set green shadow for completed slides
        $('#electure-'+slide + ' .electure-read-status').html("&#10004;");
        $('#electure-'+slide + ' .electure-read-status').attr("title", "Slide Completed!");
        $('#electure-'+slide + ' .electure-read-status').css("font-size", "17px");
      }

      function pushState(slideValue) {
        var url = '/en/ufds';
        if (typeof slideValue != 'undefined' && slideValue != null) {
          url += '?slide=' + slideValue;
                  }
        window.history.pushState({slide: slideValue}, "slide " + slideValue, url);
      }

      function showPopup(callback) {
        $('#popup').fadeIn(100, callback);
      }

      function hidePopup(callback) {
        $('#popup').fadeOut(100, callback);
      }

      function showOverlay() {
        $('#overlay').css('opacity', 0.5);
        $('#overlay').show();

        $("#e-lecture-timeline").show();
        $("#e-lecture-f1map").show();
      }

      function hideOverlay() {
        $('#overlay').hide();
        $("#e-lecture").html("");
        $("#e-lecture-timeline").hide();
        $("#e-lecture-f1map").hide();
        clearTimeout(currSlideTimer);
      }

      function makeOverlayTransparent() {
        $('#overlay').css('opacity', 0);
      }

      function hideSlide(callback) {
        isPlaying = true;
        closeSlide(cur_slide, function() {
          makeOverlayTransparent();
          setTimeout(callback, 700); // don't immediately run the animation, wait for 500ms+ first
        });
      }

      function showSlide() {
        isPlaying = false;
        openSlide(cur_slide);
        showOverlay();
      }

      function sectorBasedModeSelection() {
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        //check params are empty and then that all sectors are completed or not
        if (!Object.keys(params).length
          && sector1Count === sectorLength && sector2Count === sectorLength && sector3Count === (numSlides - 2 * sectorLength)) {
            hideOverlay();
        }
        else
          $('#mode-menu a').click();
      }

      $(function() {
        if (isMobileOS() && portraitMatcher.matches) {
          $('#rotateDeviceOverlay').show();
          $('#rotateDeviceText').show();
          $('#widenDeviceText').hide();
          $('#topbar').css("z-index", 10001);
        } else if (matchMediaNarrow.matches) {
          $('#rotateDeviceOverlay').show();
          $('#rotateDeviceText').hide();
          $('#widenDeviceText').show();
          $('#topbar').css("z-index", 10001);
        } else {
          $('#rotateDeviceOverlay').hide();
          $('#topbar').css("z-index", "");
        }

        matchMediaNarrow.addEventListener('change', e => {
          //screws up for square device! NEED RESIZE EVENT
          if (e.matches) {
            if ($('#rotateDeviceOverlay').is(":hidden")) {
              $('#rotateDeviceOverlay').show();
              $('#rotateDeviceText').hide();
              $('#widenDeviceText').show();
              $('#topbar').css("z-index", 10001);
            }
          } else {
            $('#rotateDeviceOverlay').hide();
            $('#topbar').css("z-index", "");
          }
        });
        portraitMatcher.addEventListener('change', e => {
          if (e.matches && isMobileOS()) {
            if ($('#rotateDeviceOverlay').is(":hidden")) {
              $('#rotateDeviceOverlay').show();
              $('#rotateDeviceText').show();
              $('#widenDeviceText').hide();
              $('#topbar').css("z-index", 10001);
            }
          } else {
            $('#rotateDeviceOverlay').hide();
            $('#topbar').css("z-index", "");
          }
        });
        const urlSearchParams = new URLSearchParams(window.location.search);
        const params = Object.fromEntries(urlSearchParams.entries());
        let slide = getUrlParameter('slide');
        if (typeof slide !== undefined && slide != null) {
          cur_slide = slide;
        }
        //do all timeline and slide stuff only if specific params not provided
        if (!Object.keys(params).length || params["slide"]) {
          if (!isMobile()) {
                            $('#mode-menu a').click();
                      }
        }
        $('.mcq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#mcq-answer-' + questionId).val();
          var userAnswer = $('input[type=radio][name=mcq-'+questionId+'-choice]:checked').val();

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green"><b>Correct!</b></font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red"><b>Wrong Answer! Try again...</b></font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('.msq-submit').click(function() {
          var questionId = parseInt($(this).attr('id').split('-')[1]);
          var answer = $('#msq-answer-' + questionId).val();

          var answers = [];
          $('input[type=checkbox][class=msq-choice]:checked').each(function() {
            answers.push($(this).attr('id').split('-')[3]);
          });
          answers.sort();
          var userAnswer = answers.join(',');

          if (answer === userAnswer) {
            $('#answer-status-' + questionId).html('<font color="green">Correct!</font>');
          }
          else {
            $('#answer-status-' + questionId).html('<font color="red">Wrong Answer! Try again...</font>');
          }
          $('#answer-status-' + questionId).show();
          setTimeout(function() {
            $('#answer-status-' + questionId).fadeOut(1000);
          }, 1000);
        });

        $('select.lecture-dropdown').change(function() {
          var nextSlide = $(this).val();
          openSlide(nextSlide, function() {
            runSlide(nextSlide);
            pushState(nextSlide);
          });
        });

        $('#hide-popup').click(function() {
          hidePopup();
        });

        $('#popup').hover(function() {
          $('#hide-popup').show();
        }, function() {
          $('#hide-popup').hide();
        });

        $('#electure-1 .electure-next').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-2 .electure-next').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
        $('#electure-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('1');
          pushState('1');
        });
        $('#electure-2-1 .electure-next').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
        $('#electure-2-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('2');
          pushState('2');
        });
        $('#electure-2-2 .electure-next').click(function() {
          hidePopup();
          runSlide('2-3');
          pushState('2-3');
        });
        $('#electure-2-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-1');
          pushState('2-1');
        });
        $('#electure-2-3 .electure-next').click(function() {
          hidePopup();
          runSlide('2-4');
          pushState('2-4');
        });
        $('#electure-2-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-2');
          pushState('2-2');
        });
        $('#electure-2-4 .electure-next').click(function() {
          hidePopup();
          runSlide('2-5');
          pushState('2-5');
        });
        $('#electure-2-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-3');
          pushState('2-3');
        });
        $('#electure-2-5 .electure-next').click(function() {
          hidePopup();
          runSlide('2-6');
          pushState('2-6');
        });
        $('#electure-2-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-4');
          pushState('2-4');
        });
        $('#electure-2-6 .electure-next').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-2-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-5');
          pushState('2-5');
        });
        $('#electure-3 .electure-next').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('2-6');
          pushState('2-6');
        });
        $('#electure-4 .electure-next').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('3');
          pushState('3');
        });
        $('#electure-5 .electure-next').click(function() {
          hidePopup();
          runSlide('5-1');
          pushState('5-1');
        });
        $('#electure-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('4');
          pushState('4');
        });
        $('#electure-5-1 .electure-next').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-5-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('5');
          pushState('5');
        });
        $('#electure-6 .electure-next').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('5-1');
          pushState('5-1');
        });
        $('#electure-6-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-6-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('6');
          pushState('6');
        });
        $('#electure-7 .electure-next').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7 .electure-prev').click(function() {
          hidePopup();
          runSlide('6-1');
          pushState('6-1');
        });
        $('#electure-7-1 .electure-next').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-7-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('7');
          pushState('7');
        });
        $('#electure-7-2 .electure-next').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-7-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-1');
          pushState('7-1');
        });
        $('#electure-7-3 .electure-next').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
        $('#electure-7-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-2');
          pushState('7-2');
        });
        $('#electure-7-4 .electure-next').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
        $('#electure-7-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-3');
          pushState('7-3');
        });
        $('#electure-8 .electure-next').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
        $('#electure-8 .electure-prev').click(function() {
          hidePopup();
          runSlide('7-4');
          pushState('7-4');
        });
        $('#electure-9 .electure-next').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
        $('#electure-9 .electure-prev').click(function() {
          hidePopup();
          runSlide('8');
          pushState('8');
        });
        $('#electure-9-1 .electure-next').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
        $('#electure-9-1 .electure-prev').click(function() {
          hidePopup();
          runSlide('9');
          pushState('9');
        });
        $('#electure-9-2 .electure-next').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
        $('#electure-9-2 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-1');
          pushState('9-1');
        });
        $('#electure-9-3 .electure-next').click(function() {
          hidePopup();
          runSlide('9-4');
          pushState('9-4');
        });
        $('#electure-9-3 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-2');
          pushState('9-2');
        });
        $('#electure-9-4 .electure-next').click(function() {
          hidePopup();
          runSlide('9-5');
          pushState('9-5');
        });
        $('#electure-9-4 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-3');
          pushState('9-3');
        });
        $('#electure-9-5 .electure-next').click(function() {
          hidePopup();
          runSlide('9-6');
          pushState('9-6');
        });
        $('#electure-9-5 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-4');
          pushState('9-4');
        });
        $('#electure-9-6 .electure-prev').click(function() {
          hidePopup();
          runSlide('9-5');
          pushState('9-5');
        });
      });

      function doButtonAction35() {
        CUSTOM_ACTION('find_set0');
      }
      function doButtonAction36() {
        CUSTOM_ACTION('is_same_set_0_11');
      }
      function doButtonAction37() {
        CUSTOM_ACTION('union_set_9_12');
      }
      function doButtonAction38() {
        CUSTOM_ACTION('union_set_0_11');
      }
      function doButtonAction73() {
        CUSTOM_ACTION('example',9);
      }
      function doButtonAction74() {
        CUSTOM_ACTION('example',10);
      }

      $('.electure-print').click(() => {
        window.open(`/en/ufds/print`);
      });
      function adjustPopupToImageSize() {
        var width = $('#popup-image').prop('width');
        var height = $('#popup-image').prop('height');
        $('#popup').width(width + 20);
        $('#popup').height(height + 20);
        if (width == 0 && height == 0) {
          setTimeout(adjustPopupToImageSize, 200);
        } else {
          showPopup();
        }
      }

      function POPUP_IMAGE(url) {
        $('#popup-content').html('<img id="popup-image" src="' + url + '">');
        adjustPopupToImageSize();
      }

      function URL(url.html) {
        window.open(url, '_blank');
      }

      // Implement these functions in each visualisation
      // This function will be called before entering e-Lecture Mode
      function ENTER_LECTURE_MODE() {}

      // This function will be called before returning to Explore Mode
      function ENTER_EXPLORE_MODE() {}

      // Lecture action functions
      function CUSTOM_ACTION(action, data, mode) {}

      // This function will be called everytime 1.0x is changed to 0.5x or vice versa
      function redraw() {}

      $(document).ready(function () {
        setTimeout(function () {
          $('#change-lang-popup').fadeOut('slow')
        }, 5000)
      })
    </script>
<script type="text/javascript">
    var extraCSS = {"union":"65px","isSameSet":"92px","find":"119px","init":"146px","examples":"173px"};
    var actionsIds = {"examples":{"p":"Examples","parents":["example-threeds","example-twods"]},"init":{"p":"Initialize"},"find":{"p":"FindSet"},"isSameSet":{"p":"IsSameSet"},"union":{"p":"UnionSet"}};
    var isOpens = {};
    var len = 5;
    var keys = ["examples","init","find","isSameSet","union"]; 
    for (i = 0; i < len; i++) {
        var actionDetails = keys[i];
        isOpens[actionDetails] = false;
    }
    function openAction(id) {
        hideThirdTiers(id);
        $("." + id).css("bottom", extraCSS[id]);
        if (!isOpens[id]) {
            $('.' + id).fadeIn('fast');
            isOpens[id] = true;
        }
    }
    function closeAction(id) {
        hideThirdTiers(id);
        if (isOpens[id]) {
            $('.' + id).fadeOut('fast');
            $('#' + id + '-err').html("");
            isOpens[id] = false;
        }
    }

    function hideEntireActionsPanel() {
        //hideAllThirdTiers();
                    closeAction('examples');
                    closeAction('init');
                    closeAction('find');
                    closeAction('isSameSet');
                    closeAction('union');
                hideActionsPanel();
    }

    function hideThirdTiers(tier1Action) {
        if ("parents" in actionsIds[tier1Action]) {
            for (const secondTierAction of actionsIds[tier1Action]["parents"]) {
                $('#' + secondTierAction + '-third-tier').fadeOut('fast');
            }
        }
    }

    function hideAllThirdTiers() {
        for (const tier1Action in actionsIds) {
            hideThirdTiers(tier1Action);
        }
    }

    function toggleChildExtras(tier1, selectedParentTier2) {
        hideThirdTiers(tier1);
        //this actionId must have childExtras
        var style = extraCSS[tier1];
        $("." + tier1).css("bottom", (parseInt(style.substring(0, style.length - 2)) - 27));
        //fade ins and outs are done on the ID whereas css class is set on the class
        //fade in the third tier of the selected 2nd tier parent
        $('#' + selectedParentTier2 + '-third-tier').fadeIn('fast');

        // //fade out all other third tiers of that 'action'
        // for (const parent of actions[tier1]["parents"]) {
        //     console.log("parent is " + parent + " for " + selectedParentTier2);
        //     if (parent != selectedParentTier2) {
        //         $('#' + parent + '-third-tier').fadeOut('fast');
        //     }
        // }
    }

    function setActionHeightOriginal(tier1Action) {
        $("." + tier1Action).css("bottom", extraCSS[tier1Action]);
    }

            $('#' + 'examples').click(function() {
            openAction('examples');
                                                                            closeAction('init');
                                                                closeAction('find');
                                                                closeAction('isSameSet');
                                                                closeAction('union');
                                    });
            $('#' + 'init').click(function() {
            openAction('init');
                                                closeAction('examples');
                                                                                            closeAction('find');
                                                                closeAction('isSameSet');
                                                                closeAction('union');
                                    });
            $('#' + 'find').click(function() {
            openAction('find');
                                                closeAction('examples');
                                                                closeAction('init');
                                                                                            closeAction('isSameSet');
                                                                closeAction('union');
                                    });
            $('#' + 'isSameSet').click(function() {
            openAction('isSameSet');
                                                closeAction('examples');
                                                                closeAction('init');
                                                                closeAction('find');
                                                                                            closeAction('union');
                                    });
            $('#' + 'union').click(function() {
            openAction('union');
                                                closeAction('examples');
                                                                closeAction('init');
                                                                closeAction('find');
                                                                closeAction('isSameSet');
                                                                });
    
    //important to have all the input fields in actions menu take an id containing '-input'
    $("[id*='-input']").on("keypress keydown keyup", (event) => {
        event.stopPropagation();
    });
</script>
<script type="text/javascript">
// UFDS Widget
// original author: Steven Halim

var UFDS = function() {
  var gw = new GraphWidget(false, true);
  this.getGraphWidget = function() { return gw; }

  /*
   * p: Internal representation of UFDS in this object
   * It stores the parent pointer of each vertex.
   * If p[i] = i, it means that i is the root of the tree
   *
   * The ID of the vertex SVG is equal to the vertex value
   */

  /*
   * Edge IDs are the index of the child element, so for example edge A[1]-A[2] will have ID "e2" (edge 2)
   * The edges will be set to not change when vertexes are interchanged
   * This eliminates the need to maintain an Adjacency Matrix / List
   */

  var p = new Array(), rank = new Array(), setSize = new Array(), coord = new Array(), drawn = new Array();
  this.getN = function() { return p.length; }

  var needMediumLayout = false;
  this.goMedium = function() { return needMediumLayout; }

  var stateList = [];

  this.exampleUFDS = function(ver) {
    if (ver < 0 || ver > 10) {
      $('#examples-err').html('We have no such example UFDS...');
      return false;
    }
    clearScreen();
    p = new Array();
    rank = new Array();
    setSize = new Array();
    switch (ver) {
      case 0: // the default: three disjoint sets (Figure 2.7 (left) of CP3 plus vertex 5-6-7 and 8)
        p       = [ 2, 3, 3, 3, 3, 6, 6, 6, 8];
        rank    = [ 0, 0, 1, 2, 0, 0, 1, 0, 0];
        setSize = [ 1, 1, 2, 5, 1, 1, 3, 1, 1];
        break;
      case 1: // four disjoint sets
        p       = [ 1, 3, 3, 3, 3, 5, 6, 5, 5, 6, 4, 8,12];
        rank    = [ 0, 1, 0, 2, 1, 2, 1, 0, 1, 0, 0, 0, 0];
        setSize = [ 1, 2, 1, 6, 2, 4, 2, 1, 2, 1, 1, 1, 1];
        break;
      case 2: // two trees of rank 1
        p       = [ 0, 0, 0, 0, 0, 0, 0, 7, 7, 7, 7, 7, 7, 7];
        rank    = [ 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0];
        setSize = [ 7, 1, 1, 1, 1, 1, 1, 7, 1, 1, 1, 1, 1, 1];
        break;
      case 3: // two trees of rank 2
        p       = [ 0, 0, 0, 0, 0, 4,10, 6, 6, 6,10,10];
        rank    = [ 2, 0, 0, 0, 1, 0, 1, 0, 0, 0, 2, 0];
        setSize = [ 6, 1, 1, 1, 2, 1, 4, 1, 1, 1, 6, 1];
        break;
      case 4: // two trees of rank 3
        p       = [ 2, 6, 6, 7, 5, 7, 7, 7, 9,11,11,15,13,15,15,15];
        rank    = [ 0, 0, 1, 0, 0, 1, 2, 3, 0, 1, 0, 2, 0, 1, 0, 3];
        setSize = [ 1, 1, 2, 1, 1, 2, 4, 8, 1, 2, 1, 4, 1, 2, 1, 8];
        break;
      case 5: // one tree of rank 4
        p       = [ 1, 3, 3,11, 5,11,11,15, 9,13,13,15, 7,15,15,15];
        rank    = [ 0, 1, 0, 2, 0, 1, 0, 1, 0, 1, 0, 3, 0, 2, 0, 4];
        setSize = [ 1, 2, 1, 4, 1, 2, 1, 2, 1, 2, 1, 8, 1, 4, 1,16];
        break;
      case 6: // CP4 2.11
        p       = [ 1, 1, 3, 3, 3];
        rank    = [ 0, 1, 0, 1, 0];
        setSize = [ 1, 2, 1, 3, 1];
        break;
      case 7: // CLRS3 21.4 - converted to 0-based, ignoring 'a'
        p       = [ 6, 1, 4, 1, 4, 2, 1];
        rank    = [ 0, 2, 1, 0, 2, 0, 1];
        setSize = [ 1, 4, 2, 1, 3, 1, 2];
        break;
      case 8: // GtCP 7.41 - converted to 0-based
        p       = [ 3, 1, 1, 3, 4, 2, 3, 2];
        rank    = [ 0, 2, 1, 1, 0, 0, 0, 0];
        setSize = [ 1, 4, 3, 3, 1, 1, 1, 1];
        break;
      case 9: // tallest tree with N = 8 and rank 3
        p       = [ 1, 3, 3, 7, 5, 7, 7, 7];
        rank    = [ 0, 1, 0, 2, 0, 1, 0, 3];
        setSize = [ 1, 2, 1, 4, 1, 2, 1, 8];
        break;
      case 10: // shortest tree with N = 8 and rank 1
        p       = [ 0, 0, 0, 0, 0, 0, 0, 0];
        rank    = [ 1, 0, 0, 0, 0, 0, 0, 0];
        setSize = [ 8, 1, 1, 1, 1, 1, 1, 1];
        break;
    }
    layoutUFDS();
    initUFDS();
    return true;
  }

  this.initArray = function(N, M) { // N >= 10, M <= N-3
    clearScreen();
    p = new Array();
    rank = new Array();
    setSize = new Array();
    for (var i = 0; i < N; ++i) {
      p[i] = i;
      rank[i] = 0;
      setSize[i] = 1;
    }

    while (getS() != M) { // keep merging until we have only M random disjoint sets
      var i = Math.floor(Math.random()*N);
      var j = Math.floor(Math.random()*N);
      this.unionSet(i, j, false);
    }

    layoutUFDS();
    initUFDS();
    return true;
  }

  this.generate = function(newP, newRank) {
    clearScreen();
    if (newP.length != newRank.length) return;
    p = newP;
    rank = newRank;
    layoutUFDS();
    initUFDS();
  };

  this.saveArray = function() {
    arr = new Array();
    for (var i = 0; i < p.length; ++i)
      arr[i] = new ObjectPair(p[i], rank[i]);
    return arr;
  }

  this.restoreArray = function(arr) {
    clearScreen();
    p = new Array();
    rank = new Array();
    for (var i = 0; i < arr.length; ++i) {
      p[i] = arr[i].getFirst();
      rank[i] = arr[i].getSecond();
    }
    layoutUFDS();
    initUFDS();
  }

  function clearScreen() {
    var i;
    for (i = 0; i < p.length; ++i)
      gw.removeEdge(i);
    for (i = 0; i < p.length; ++i)
      gw.removeVertex(i);
    gw.removeVertex(999);
  }

  function layoutUFDS() {
    needMediumLayout = false; // assume false first

    // draw first level
    var firstLevel = 0;
    var roots = [];
    var sectionWidth = [];
    for (var i = 0; i < p.length; ++i) {
      coord[i] = new Array();
      coord[i][0] = 0;
      coord[i][1] = 0;
      drawn[i] = 0;
      if (p[i] == i)
        ++firstLevel;
    }

    var unitWidth = 1000/p.length; // firstLevel;
    if (unitWidth < 35) // got two vertices that are too close
      needMediumLayout = true;
    var xCoord = 0; // sectionWidth/2;
    var yCoord = 25; // 26 Feb, 50->25
    for (var i = 0; i < p.length; ++i)
      if (p[i] == i) {
        roots.push(i);
        drawn[i] = 1;
        var sz = unitWidth*setSize[i]; // note that setSize[i] is only correct if i is a root vertex, not guaranteed down below due to path compression etc...
        sectionWidth.push(sz); // the bigger the tree is, the bigger its drawing area too
        coord[i][0] = xCoord + sz/2;
        coord[i][1] = yCoord;
        xCoord += sz;
      }

    function drawRest(root, subSectionWidth, currSubSection, level) {
      var totalChild = 0;
      var childs = [];
      for (var i = 0; i < p.length; ++i)
        if (p[i] == root && !drawn[i])
          ++totalChild;

      var vertexDistance = subSectionWidth/totalChild;
      if (vertexDistance < 35) // got two vertices that are too close
        needMediumLayout = true;
      var xCoord = (coord[root][0] - subSectionWidth/2 + vertexDistance/2);
      var yCoord = 25 + 55*level; // 06 Jun, 25 + 55*level
      for (var i = 0; i < p.length; ++i)
        if (p[i] == root && !drawn[i]) {
          childs.push(i);
          drawn[i] = 1;
          coord[i][0] = xCoord;
          coord[i][1] = yCoord;
          xCoord += vertexDistance;
        }

      var currSubSection1 = 0;
      for (var j = 0; j < childs.length; ++j)
        drawRest(childs[j], vertexDistance, currSubSection1++, level+1);
    }

    var currSubSection = 0;
    for (var j = 0; j < roots.length; ++j)
      drawRest(roots[j], sectionWidth[j], currSubSection++, 1);
  }

  function getS() {
    var ans = 0;
    for (var i = 0; i < p.length; ++i)
      if (p[i] == i)
        ++ans;
    return ans;
  }

  this.getS = function() { return getS(); }

  function getLabel(i) {
    var label = "";
    if (p[i] == i) { // only do this for a root
      if (rank[i] > 0) // write something
        label = "r: " + rank[i]; // set extraText = rank of each vertex that are > 0
      if (setSize[i] > 1) { // root, write set size if it is not obviously 1
        if (label != "") label += ", ";
        label += "s: " + setSize[i]; // then add setSize for root vertices
      }
    }
    return label;
  }

  function initUFDS() {
    $("#info").text("N=" + p.length + ", " + getS() + " set(s)");
    for (var i = 0; i < p.length; ++i)
      gw.addVertex(coord[i][0], coord[i][1], i, i, true, getLabel(i));
    for (var i = 0; i < p.length; ++i)
      if (p[i] != i)
        gw.addEdge(p[i], i, i, EDGE_TYPE_UDE, 1, true);
  }

  this.findSet = function(vtxI, startAnimationDirectly, lineToBeHighlighted, callback) {
    var i = parseInt(vtxI), cs;
    if (i < 0 || i >= p.length) {
      $('#find-err').html('Sorry, the valid value for i is [0..{limit}].<br>'.replace("{limit}", (p.length-1))); // 'Sorry, the valid value for i is [0..{limit}].'
      if (typeof callback == 'function') callback();
      return false;
    }

    if (startAnimationDirectly == true) {
      stateList = [];
      populatePseudocode(0);
    }

    cs = createState(p, rank);
    cs["vl"][i]["state"] = VERTEX_HIGHLIGHTED;
    cs["status"] = 'Find the representative vertex for the set that contains item {i}.<br>'.replace("{i}", i); // 'Find the representative vertex for the set that contains item {i}.'
    cs["lineNo"] = 1;
    if (startAnimationDirectly == false) cs["lineNo"] = lineToBeHighlighted;
    stateList.push(cs);

    var visited = new Array();

    while (p[i] != i) {
      cs = createState(p, rank);
      visited.push(i);

      for (var j = 0; j < visited.length; ++j) {
        var v = visited[j];
        cs["vl"][v]["state"] = VERTEX_TRAVERSED;
        cs["vl"][p[v]]["state"] = VERTEX_HIGHLIGHTED;
        cs["el"][v]["state"] = EDGE_TRAVERSED;
      }
      cs["status"] = 'Vertex {i} has a parent which is vertex {p[i]}.<br>'.replace("{i}", i).replace("{p[i]}", p[i]); // 'Vertex {i} has a parent which is vertex {p[i]}.'
      cs["lineNo"] = 3;
      if (startAnimationDirectly == false)
        cs["lineNo"] = lineToBeHighlighted;
      stateList.push(cs);
      i = p[i];
    }

    cs = createState(p, rank);
    cs["vl"][i]["state"] = VERTEX_HIGHLIGHTED;
    cs["status"] = 'Vertex {i} is the representative vertex of this set.'.replace("{i}", i); // 'Vertex {i} is the representative vertex of this set.'
    cs["lineNo"] = 2;
    if (startAnimationDirectly == false)
      cs["lineNo"] = lineToBeHighlighted;
    stateList.push(cs);

    for (var j = visited.length-1; j >= 0; --j) {
      var v = visited[j];
      p[v] = i;
      cs = createState(p, rank);
      cs["el"][v]["state"] = EDGE_HIGHLIGHTED;
      cs["status"] = '<i>Path compression</i>, Vertex {v} points directly to Vertex {i}.<br>'.replace("{v}", v).replace("{i}", i); // '<i>Path compression</i>, Vertex {v} points directly to Vertex {i}.'
      cs["lineNo"] = 3;
      if (startAnimationDirectly == false)
        cs["lineNo"] = lineToBeHighlighted;
      stateList.push(cs);
    }

    cs = createState(p, rank);
    cs["vl"][parseInt(vtxI)]["state"] = VERTEX_TRAVERSED;
    cs["vl"][i]["state"] = VERTEX_HIGHLIGHTED;
    cs["status"] = 'The current UFDS structure.'; // 'The current UFDS structure.'
    stateList.push(cs);

    if (startAnimationDirectly) gw.startAnimation(stateList, callback);
    return true;
  }

  this.isSameSet = function(vtxI, vtxJ, startAnimationDirectly, callback) {
    var i = parseInt(vtxI), j = parseInt(vtxJ), cs;

    if (i < 0 || i >= p.length) {
      $('#isSameSet-err').html('Sorry, the valid value for i is [0..{limit}].<br>'.replace("{limit}", (p.length-1))); // 'Sorry, the valid value for i is [0..{limit}].'
      if (typeof callback == 'function') callback();
      return false;
    }

    if (j < 0 || j >= p.length) {
      $('#isSameSet-err').html('Sorry, the valid value for j is [0..{limit}].'.replace("{limit}", (p.length-1))); // 'Sorry, the valid value for j is [0..{limit}].'
      if (typeof callback == 'function') callback();
      return false;
    }

    if (startAnimationDirectly == true) {
      stateList = [];
      populatePseudocode(1);
    }

    this.findSet(i, false, 1);
    this.findSet(j, false, 2);
    var x = p[i], y = p[j];

    cs = createState(p, rank);
    cs["vl"][i]["state"] = VERTEX_TRAVERSED;
    cs["vl"][j]["state"] = VERTEX_TRAVERSED;
    if (x != y) {
      cs["vl"][x]["state"] = VERTEX_HIGHLIGHTED;
      cs["vl"][y]["state"] = VERTEX_HIGHLIGHTED;
      cs["status"] = 'i = {i} (boss: x = {x})<br>j = {j} (boss: y = {y}); they belong to different sets.<br>'.replace("{i}", i).replace("{x}", x).replace("{j}", j).replace("{y}", y); // 'i = {i} (boss: x = {x})<br>j = {j} (boss: y = {y}); they belong to different sets.'
    }
    else {
      cs["vl"][x]["state"] = VERTEX_HIGHLIGHTED;
      cs["status"] = 'i = {i} and j = {j} belong to the same set, which is the set that has representative vertex: {x}.<br>'.replace("{i}", i).replace("{x}", x).replace("{j}", j); // 'i = {i} and j = {j} belong to the same set, which is the set that has representative vertex: {x}.'
    }
    cs["lineNo"] = 3;
    stateList.push(cs);

    if (startAnimationDirectly) gw.startAnimation(stateList, callback);
    return true;
  }

  this.unionSet = function(vtxI, vtxJ, startAnimationDirectly, callback) {
    var i = parseInt(vtxI), j = parseInt(vtxJ), cs;

    if (i < 0 || i >= p.length) {
      $('#union-err').html('Sorry, the valid value for i is [0..{limit}].<br>'.replace("{limit}", (p.length-1))); // 'Sorry, the valid value for i is [0..{limit}].'
      if (typeof callback == 'function') callback();
      return false;
    }

    if (j < 0 || j >= p.length) {
      $('#union-err').html('Sorry, the valid value for j is [0..{limit}].'.replace("{limit}", (p.length-1))); // 'Sorry, the valid value for j is [0..{limit}].'
      if (typeof callback == 'function') callback();
      return false;
    }

    if (startAnimationDirectly == true) {
      stateList = [];
      populatePseudocode(2);
    }

    this.findSet(i, false, 1);
    this.findSet(j, false, 2);
    var x = p[i], y = p[j];
    var finalStatus = '';
    var selected = x;

    if (x != y) {
      var linkingStatus = '';
      cs = createState(p, rank);
      cs["vl"][x]["state"] = VERTEX_HIGHLIGHTED;
      cs["vl"][y]["state"] = VERTEX_HIGHLIGHTED;
      cs["lineNo"] = 3;
      cs["status"] = 'i = {i} (boss: x = {x})<br>j = {j} (boss: y = {y}); they belong to different sets.<br>'.replace("{i}", i).replace("{x}", x).replace("{j}", j).replace("{y}", y); 'i = {i} (boss: x = {x})<br>j = {j} (boss: y = {y}); they belong to different sets.'
      stateList.push(cs);

      cs = createState(p, rank);
      cs["vl"][x]["state"] = VERTEX_HIGHLIGHTED;
      cs["vl"][y]["state"] = VERTEX_HIGHLIGHTED;
      if (rank[x] > rank[y]) {
        cs["el"][y] = {};
        cs["el"][y]["type"] = EDGE_TYPE_UDE;
        cs["el"][y]["weight"] = 1;
        cs["el"][y]["animateHighlighted"] = false;
        cs["el"][y]["vertexA"] = x;
        cs["el"][y]["vertexB"] = y;
        cs["el"][y]["state"] = EDGE_TRAVERSED;
        cs["vl"][y]["cy"] += 25; // go down halfway to angle the edge
        cs["lineNo"] = [4,5];
        cs["status"] = 'p[{y}] = {x}, we use union-by-rank heuristic to avoid increasing the height of the combined tree if not necessary.<br>'.replace("{y}", y).replace("{x}", x); // 'p[{y}] = {x}, we use union-by-rank heuristic to avoid increasing the height of the combined tree if not necessary.'
        // cs["status"] = 'p[{y}] = {x}, we use union-by-rank heuristic to avoid increasing the height of the combined tree if not necessary.<br>'.replace("{x}", x).replace("{y}", y);
      }
      else {
        cs["el"][x] = {};
        cs["el"][x]["type"] = EDGE_TYPE_UDE;
        cs["el"][x]["weight"] = 1;
        cs["el"][x]["animateHighlighted"] = false;
        cs["el"][x]["vertexA"] = y;
        cs["el"][x]["vertexB"] = x;
        cs["el"][x]["state"] = EDGE_TRAVERSED;
        cs["vl"][x]["cy"] += 25; // go down halfway to angle the edge
        cs["lineNo"] = 6;
        if (rank[x] == rank[y])
          cs["status"] = 'p[{x}] = {y}, because the (heuristic) ranks are equal, we have no choice but to increase the rank of combined tree by one.'.replace("{x}", x).replace("{y}", y); // 'p[{x}] = {y}, because the (heuristic) ranks are equal, we have no choice but to increase the rank of combined tree by one.'
        else
          cs["status"] = 'p[{y}] = {x}, we use union-by-rank heuristic to avoid increasing the height of the combined tree if not necessary.<br>'.replace("{y}", y).replace("{x}", x); // 'p[{y}] = {x}, we use union-by-rank heuristic to avoid increasing the height of the combined tree if not necessary.'
      }
      stateList.push(cs);

      if (rank[x] > rank[y]) {
        p[y] = x;
        setSize[x] += setSize[y];
        selected = y;
        linkingStatus = 'After relayout, the new root of the combined tree is vertex {vtx}.<br>'.replace("{vtx}", x); // 'After relayout, the new root of the combined tree is vertex {vtx}.'
      }
      else {
        p[x] = y;
        setSize[y] += setSize[x];
        selected = x;
        linkingStatus = 'After relayout, the new root of the combined tree is vertex {vtx}.<br>'.replace("{vtx}", y); // 'After relayout, the new root of the combined tree is vertex {vtx}.'
        if (rank[x] == rank[y])
          ++rank[y];
      }

      cs = createState(p, rank);
      cs["vl"][x]["state"] = VERTEX_HIGHLIGHTED;
      cs["vl"][y]["state"] = VERTEX_HIGHLIGHTED;
      cs["el"][selected]["state"] = EDGE_HIGHLIGHTED;
      cs["status"] = linkingStatus;
      cs["lineNo"] = (selected == y ? 5 : 6);
      stateList.push(cs);

      finalStatus = 'We are done with the UnionSet operation.'; // 'We are done with the UnionSet operation.';
    }
    else
      finalStatus = 'x = y = {x}, thus there is no need to do union.'.replace("{x}", x); // 'x = y = {x}, thus there is no need to do union.'

    cs = createState(p, rank);
    cs["status"] = finalStatus;
    cs["lineNo"] = 7;
    stateList.push(cs);

    if (startAnimationDirectly) gw.startAnimation(stateList, callback);
    return true;
  }

  function populatePseudocode(act) {
    $('#code4').html('&nbsp;');
    $('#code5').html('&nbsp;');
    $('#code6').html('&nbsp;');
    $('#code7').html('// <b><a href="https://github.com/stevenhalim/cpbook-code/tree/master/ch2/ourown" target="_blank">unionfind_ds.cpp/py/java/ml</a></b>');
    switch (act) {
      case 0: // FindSet
        $('#code1').html('if p[i] == i');
        $('#code2').html('&nbsp&nbspreturn i');
        $('#code3').html('else return p[i] = FindSet(p[i])');
        break;
      case 1: // IsSameSet
        $('#code1').html('x = FindSet(i)');
        $('#code2').html('y = FindSet(j)');
        $('#code3').html('return x == y');
        break;
      case 2: // UnionSet
        $('#code1').html('x = FindSet(i)');
        $('#code2').html('y = FindSet(j)');
        $('#code3').html('if (x != y) // !IsSameSet(i, j)');
        $('#code4').html('&nbsp&nbspif rank[x] > rank[y]');
        $('#code5').html('&nbsp&nbsp&nbsp&nbspp[y] = x;');
        $('#code6').html('&nbsp&nbspelse p[x] = y;');
        break;
      }
  }

  function createState(iUFDS, rankInfo) {
    var s = {
      "vl": {},
      "el": {},
      "info": "N=" + p.length + ", " + getS() + " set(s)",
    };

    layoutUFDS(); // the structure may change, so re-layout it first

    for (var i = 0; i < iUFDS.length; ++i) {
      s["vl"][i] = {};
      s["vl"][i]["cx"] = coord[i][0];
      s["vl"][i]["cy"] = coord[i][1];
      s["vl"][i]["text"] = i;
      s["vl"][i]["extratext"] = getLabel(i);
      s["vl"][i]["state"] = VERTEX_DEFAULT;
    }

    for (var i = 0; i < iUFDS.length; ++i) {
      if (iUFDS[i] != i) {
        s["el"][i] = {};
        s["el"][i]["vertexA"] = iUFDS[i];
        s["el"][i]["vertexB"] = i;
        s["el"][i]["type"] = EDGE_TYPE_UDE;
        s["el"][i]["weight"] = 1;
        s["el"][i]["state"] = EDGE_DEFAULT; // (iUFDS[i] == i) ? OBJ_HIDDEN : 
        s["el"][i]["animateHighlighted"] = false;
      }
    }

    return s;
  }
}



// UFDS Action
var actionsWidth = 120;
var statusCodetraceWidth = 370;

// local
$('#play').hide();
var uw = new UFDS();
var gw = uw.getGraphWidget();

function randomize() {
  $("#arrn").val(10+Math.floor(Math.random()*15)); // [10..24]
  $("#arrm").val(1+Math.floor(Math.random()*7)); // [1..7]
  $("#arrfindi").prop("max", uw.getN()-1);
  $("#arrfindi").val(Math.floor(Math.random()*uw.getN()));
  $("#iivalue").prop("max", uw.getN()-1);
  $("#iivalue").val(Math.floor(Math.random()*uw.getN()));
  $("#jjvalue").prop("max", uw.getN()-1);
  $("#jjvalue").val(Math.floor(Math.random()*uw.getN())); // ok to be same as #iivalue
  $("#ivalue").prop("max", uw.getN()-1);
  $("#ivalue").val(Math.floor(Math.random()*uw.getN()));
  $("#jvalue").prop("max", uw.getN()-1);
  $("#jvalue").val(Math.floor(Math.random()*uw.getN())); // ok to be same as #ivalue
}

$(function() {
  gw.setAnimationDuration(700 / speedVal);
  uw.exampleUFDS(Math.floor(Math.random()*9));
  setDefaultScale(true);

  var p = getQueryVariable("p");
  var rank = getQueryVariable("rank");
  // question to self if later got bug: put setSize?
  if (p.length > 0 && rank.length > 0) {
    createP = p.split(",");
    createRank = rank.split(",");
    uw.generate(createP, createRank);
  }
  var mode = getQueryVariable("mode");
  var i = getQueryVariable("i");
  var j = getQueryVariable("j");
  if (mode.length > 0) {
    switch (mode) {
      case "find":
        $('#find').click();
        if (i.length > 0)
          $('#arrfindi').val(i);
        break;
      case "isSameSet":
        $('#isSameSet').click();
        if (i.length > 0)
          $('#iivalue').val(i);
        if (j.length > 0)
          $('#jjvalue').val(j);
        break;
      case "unionSet":
        $('#union').click();
        if (i.length > 0)
          $('#ivalue').val(i);
        if (j.length > 0)
          $('#jvalue').val(j);
        break;
    }
  }
  else { // default, so randomize
    $("#arrn").val(10+Math.floor(Math.random()*15)); // [10..24]
    $("#arrm").val(1+Math.floor(Math.random()*7)); // [1..7]
    init();
    randomize(); // randomize again
  }
});

function adjust_scale() {
  if (uw.goMedium())
    setMediumScale(true);
  else
    setDefaultScale(true);
}

function example(ver) {
  if (isPlaying) stop();
  if (uw.exampleUFDS(ver)) { // not 100% the same as commonAction
    $('#progress-bar').slider("option", "max", 0);
    isPlaying = false;
  }
  adjust_scale();
}

function init() {
  if (isPlaying) stop();
  var N = parseInt($("#arrn").val());
  var M = parseInt($("#arrm").val());
  if (N < 1 || N > 32)
    $('#init-err').html('The valid range for N is [1..32]');
  else if (M > N)
    $('#init-err').html('The valid range for M is [1..N] and N = ' + N);
  else if (uw.initArray(N, M)) { // not 100% same as commonAction
    $('#init-err').html('');
    $('#progress-bar').slider("option", "max", 0);
    isPlaying = false;
  }
  adjust_scale();
}

function find(callback) {
  if (isPlaying) stop();
  adjust_scale();
  var input = parseInt($('#arrfindi').val());
  commonAction(uw.findSet(input, true, 1, callback), "FindSet(" + input + ")");
  setTimeout(function() { randomize(); }, 500);
}

function issameset(callback) {
  if (isPlaying) stop();
  adjust_scale();
  var input1 = parseInt($("#iivalue").val()), input2 = parseInt($("#jjvalue").val());;
  commonAction(uw.isSameSet(input1, input2, true, callback), "IsSameSet(" + input1 + ", " + input2 + ")");
  setTimeout(function() { randomize(); }, 500);
}

function union(callback) {
  if (isPlaying) stop();
  adjust_scale();
  var input1 = parseInt($("#ivalue").val()), input2 = parseInt($("#jvalue").val());;
  commonAction(uw.unionSet(input1, input2, true, callback), "UnionSet(" + input1 + ", " + input2 + ")");
  setTimeout(function() { randomize(); }, 500);
}

var exploreModeData = [];

// This function will be called before entering e-Lecture Mode
function ENTER_LECTURE_MODE() {
  exploreModeData = uw.saveArray();
  uw.exampleUFDS(1); // always this default example
}

// This function will be called before returning to Explore Mode
function ENTER_EXPLORE_MODE() {
  uw.restoreArray(exploreModeData);
}

// Lecture action functions
function CUSTOM_ACTION(action, data, mode) {
  if (action == 'example') {
    example(data);
  }
  else if (action == 'find_set0') {
    hideSlide(function() {
      $('#arrfindi').val(0); // force 0
      find(showSlide);
    });
  }
  else if (action == 'is_same_set_0_11') {
    hideSlide(function() {
      $('#iivalue').val(0); // force 0
      $('#jjvalue').val(11); // force 11
      issameset(showSlide);
    });
  }
  else if (action == 'union_set_0_11') {
    hideSlide(function() {
      $('#ivalue').val(0); // force 0
      $('#jvalue').val(11); // force 11
      union(showSlide);
    });
  }
  else if (action == 'union_set_9_12') {
    hideSlide(function() {
      $('#ivalue').val(9); // force 9
      $('#jvalue').val(12); // force 12
      union(showSlide);
    });
  }
}
</script>
</body>

<!-- Mirrored from visualgo.net/en/ufds by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 16 Dec 2023 15:18:03 GMT -->
</html>
